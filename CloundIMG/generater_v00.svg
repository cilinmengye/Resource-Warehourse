<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2744.628843802647 1463.0334977275556" width="2744.628843802647" height="1463.0334977275556"><!-- svg-source:excalidraw --><metadata></metadata><defs><style class="style-fonts">
      @font-face { font-family: Comic Shanns; src: url(data:font/woff2;base64,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); }</style></defs><rect x="0" y="0" width="2744.628843802647" height="1463.0334977275556" fill="#ffffff"></rect><g transform="translate(716.7632659300166 27.610706560815743) rotate(0 115.49995422363281 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Prompt: "hello"</text></g><g stroke-linecap="round"><g transform="translate(819.3503136765082 73.61070656081574) rotate(0 -0.4917845756757231 15.795918558207632)"><path d="M0 0 C-0.3 12.77, 0.22 25.88, -0.98 31.59 M0 0 C-0.32 8.55, -0.67 17.1, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(819.3503136765082 73.61070656081574) rotate(0 -0.4917845756757231 15.795918558207632)"><path d="M-6.02 16.61 C-3.99 22.75, -1.28 29.16, -0.98 31.59 M-6.02 16.61 C-4.75 20.69, -3.48 24.8, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(819.3503136765082 73.61070656081574) rotate(0 -0.4917845756757231 15.795918558207632)"><path d="M4.79 16.88 C2.54 22.92, 0.98 29.23, -0.98 31.59 M4.79 16.88 C3.19 20.94, 1.59 24.98, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(684.053425779171 127.0707668002251) rotate(0 229.69393722112386 16.839738141954513)"><text x="0" y="23.575633398736326" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="26.94358102712723px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt_token_ids:[8,5,12,12,15]</text></g><g transform="translate(871.1954566508236 75.39841473653723) rotate(0 99 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tokenizer.encode()</text></g><g stroke-linecap="round" transform="translate(661.5076805112574 116.202543677231) rotate(0 243.0919752714541 27.197330945808545)"><path d="M13.6 0 C193.08 -0.8, 371.23 -0.97, 472.59 0 M13.6 0 C182.2 -0.13, 350.19 -0.17, 472.59 0 M472.59 0 C481.63 0.33, 487.07 3.97, 486.18 13.6 M472.59 0 C482.89 -2.01, 487.45 2.97, 486.18 13.6 M486.18 13.6 C487.16 18.81, 484.63 28.13, 486.18 40.8 M486.18 13.6 C485.82 24.81, 486.53 35.53, 486.18 40.8 M486.18 40.8 C484.9 51.26, 482.14 54.3, 472.59 54.39 M486.18 40.8 C485.41 50.46, 479.5 52.82, 472.59 54.39 M472.59 54.39 C362.2 55.86, 250.83 55.64, 13.6 54.39 M472.59 54.39 C337.65 54.82, 201.92 54.79, 13.6 54.39 M13.6 54.39 C3.01 53.52, -0.54 51.07, 0 40.8 M13.6 54.39 C2.81 56.54, -1.43 48.83, 0 40.8 M0 40.8 C-1.89 34.42, -2.17 27.47, 0 13.6 M0 40.8 C0.01 33.69, -0.12 27.34, 0 13.6 M0 13.6 C0.29 6.23, 3.02 -1.05, 13.6 0 M0 13.6 C-2.02 3.45, 3.25 1.91, 13.6 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1162.9984524935333 129.9910058205096) rotate(0 44 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence</text></g><g transform="translate(808.8559082946156 202.34454562134852) rotate(0 82.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.add()</text></g><g stroke-linecap="round" transform="translate(823.1753719272081 300.3497290469568) rotate(0 199.48685740311066 34.570152486267034)"><path d="M17.29 0 C160.57 -5.42, 306.14 -5.88, 381.69 0 C396.24 2.69, 395.38 7.57, 398.97 17.29 C399.5 24.84, 397.61 28.16, 398.97 51.86 C395.43 64.46, 390.12 72.15, 381.69 69.14 C279.62 67.72, 176.27 71.78, 17.29 69.14 C7.33 70.11, 3.41 63.32, 0 51.86 C0.8 42.58, -2.48 37.81, 0 17.29 C1.29 2.21, 9.1 0.28, 17.29 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M17.29 0 C112.58 1.8, 208.42 0.84, 381.69 0 M17.29 0 C159.96 -0.55, 302.42 -0.92, 381.69 0 M381.69 0 C394.32 -1.36, 397.74 6.58, 398.97 17.29 M381.69 0 C391.46 1, 397.52 3.85, 398.97 17.29 M398.97 17.29 C399.61 29.65, 400.54 44.18, 398.97 51.86 M398.97 17.29 C399 30.27, 398.42 43.6, 398.97 51.86 M398.97 51.86 C397.11 62.01, 392.02 68.29, 381.69 69.14 M398.97 51.86 C400.97 63.48, 392.24 66.9, 381.69 69.14 M381.69 69.14 C296.71 70.87, 212.03 69.73, 17.29 69.14 M381.69 69.14 C257.96 68.52, 134.1 68.73, 17.29 69.14 M17.29 69.14 C4.52 68.25, -1.81 64.99, 0 51.86 M17.29 69.14 C4.69 67.22, -0.77 61.14, 0 51.86 M0 51.86 C0.3 44.54, -0.59 37.25, 0 17.29 M0 51.86 C-0.8 41.02, -0.93 30.76, 0 17.29 M0 17.29 C-1.11 7.42, 6.17 0.28, 17.29 0 M0 17.29 C-1.3 7.93, 5.61 0.57, 17.29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(825.4422331491753 300.3497722845641) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C28.39 -2.58, 43.46 3.03, 46.75 0 C53.55 1.81, 58.86 7.66, 62.34 15.58 C60.57 25.14, 58.81 42.15, 62.34 53.56 C59.25 66.95, 56.58 71.79, 46.75 69.14 C39.72 71.63, 28.49 69.57, 15.58 69.14 C8.6 69.08, -1.88 61.57, 0 53.56 C-2.97 46.23, 1.22 29.19, 0 15.58 C3.34 5.47, 3.46 -2.43, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C25.37 -0.64, 33 -0.19, 46.75 0 M15.58 0 C25.99 -0.79, 35.87 -0.59, 46.75 0 M46.75 0 C55.91 0.82, 60.81 6.06, 62.34 15.58 M46.75 0 C55.69 -1.91, 64.15 7.24, 62.34 15.58 M62.34 15.58 C63.66 27.61, 63.94 36.95, 62.34 53.56 M62.34 15.58 C62.1 29.89, 61.5 42.99, 62.34 53.56 M62.34 53.56 C61.15 63.1, 58.88 69.23, 46.75 69.14 M62.34 53.56 C61.37 61.71, 55.62 69.02, 46.75 69.14 M46.75 69.14 C37.31 69.18, 26.86 67.86, 15.58 69.14 M46.75 69.14 C38.01 70.26, 30.15 68.88, 15.58 69.14 M15.58 69.14 C3.39 70.75, -0.93 62.27, 0 53.56 M15.58 69.14 C4.43 66.9, -2.21 62.73, 0 53.56 M0 53.56 C-0.8 43.59, -0.06 34.93, 0 15.58 M0 53.56 C-0.59 38.48, -0.27 25.17, 0 15.58 M0 15.58 C0.41 5.47, 4.07 1.89, 15.58 0 M0 15.58 C-0.16 5.76, 7.4 0.76, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(888.3486697613002 300.91650920885877) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C26.07 3.14, 26.9 2.26, 46.75 0 C53.67 2.46, 63.62 5.3, 62.34 15.58 C58.45 28.6, 58.91 42.47, 62.34 53.56 C61.78 66.6, 57.8 71.6, 46.75 69.14 C41.97 70.58, 37.45 69.55, 15.58 69.14 C3.31 66.76, -0.93 64.34, 0 53.56 C1.84 39.36, 3.89 32.55, 0 15.58 C-1.73 2.77, 7.94 1.06, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C28.42 0.05, 37.94 0.96, 46.75 0 M15.58 0 C24.61 -0.41, 31.91 0.68, 46.75 0 M46.75 0 C55.62 0.87, 61.08 3.53, 62.34 15.58 M46.75 0 C58.96 2.05, 62.3 5.58, 62.34 15.58 M62.34 15.58 C64.12 24.32, 63.98 36.1, 62.34 53.56 M62.34 15.58 C61.28 26.12, 61.62 37.6, 62.34 53.56 M62.34 53.56 C64.07 64.03, 56.3 67.2, 46.75 69.14 M62.34 53.56 C60.81 63.83, 57.87 69.37, 46.75 69.14 M46.75 69.14 C35.68 67.58, 22.18 68.57, 15.58 69.14 M46.75 69.14 C34.9 68.98, 23.39 70.24, 15.58 69.14 M15.58 69.14 C4.26 67.47, -0.67 61.99, 0 53.56 M15.58 69.14 C2.98 67.92, -1.17 64.08, 0 53.56 M0 53.56 C0.11 42.95, 1.84 30.26, 0 15.58 M0 53.56 C-0.22 44.98, 0.54 34.89, 0 15.58 M0 15.58 C-1.13 7.08, 5.06 0.49, 15.58 0 M0 15.58 C2.21 5.95, 7.46 -1.04, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(951.8215622532789 302.0499830574481) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C18.82 1.39, 25.75 2.04, 46.75 0 C58.43 0.11, 62.86 3.4, 62.34 15.58 C58.58 26.62, 61.1 34.29, 62.34 53.56 C62.99 66.41, 53.69 72.02, 46.75 69.14 C38.19 69.23, 20.93 66.91, 15.58 69.14 C4.26 69.53, -0.71 61.05, 0 53.56 C3.09 39.19, -1.98 21.84, 0 15.58 C2.74 6.26, 1.64 2.01, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C24.53 0.89, 32.26 1.08, 46.75 0 M15.58 0 C21.59 0.62, 28.06 0.65, 46.75 0 M46.75 0 C55.88 -1.66, 63.91 6.98, 62.34 15.58 M46.75 0 C57.1 0.38, 61.51 6.64, 62.34 15.58 M62.34 15.58 C64.03 28.8, 62.54 40.37, 62.34 53.56 M62.34 15.58 C61.39 27.54, 62.85 40.38, 62.34 53.56 M62.34 53.56 C61.5 62, 55.82 69.04, 46.75 69.14 M62.34 53.56 C63.07 64.18, 58.99 70.17, 46.75 69.14 M46.75 69.14 C36.86 68.36, 29.91 67.41, 15.58 69.14 M46.75 69.14 C33.59 69.8, 21.76 68.17, 15.58 69.14 M15.58 69.14 C4.53 67.19, -1.92 62.89, 0 53.56 M15.58 69.14 C4.02 69.28, -0.3 63.06, 0 53.56 M0 53.56 C1.7 41.62, -1.04 30.94, 0 15.58 M0 53.56 C0.42 44.08, -0.35 35.28, 0 15.58 M0 15.58 C-0.14 5.69, 7.12 0.66, 15.58 0 M0 15.58 C2.27 4.16, 3.79 0.25, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1015.294714170896 303.18341366843015) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C23.78 2.18, 40.22 -0.18, 46.75 0 C57.66 -1.79, 59.15 1.65, 62.34 15.58 C61.19 30.77, 62.41 43.1, 62.34 53.56 C58.88 66.83, 60.17 70.71, 46.75 69.14 C34.68 66.75, 25.44 69.52, 15.58 69.14 C4.48 66.25, 3.08 65.24, 0 53.56 C-2.36 43.48, 2.11 39.33, 0 15.58 C-3.56 7.21, 1.84 1.85, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C24.34 0.94, 32.47 0.97, 46.75 0 M15.58 0 C22.05 0.31, 29.42 -0.96, 46.75 0 M46.75 0 C58.72 1.78, 62.3 5.53, 62.34 15.58 M46.75 0 C56.31 1.45, 63.15 6.96, 62.34 15.58 M62.34 15.58 C62.51 23.87, 63.12 31.63, 62.34 53.56 M62.34 15.58 C62.98 24.41, 61.69 32.18, 62.34 53.56 M62.34 53.56 C61.01 63.84, 57.78 69.34, 46.75 69.14 M62.34 53.56 C64.18 64.97, 56.9 70.04, 46.75 69.14 M46.75 69.14 C40.99 67.56, 34.68 67.81, 15.58 69.14 M46.75 69.14 C38.33 68.56, 30.5 68.42, 15.58 69.14 M15.58 69.14 C3.27 68.08, -1.02 64.07, 0 53.56 M15.58 69.14 C4.89 68.25, -0.58 63.91, 0 53.56 M0 53.56 C-1.37 39.86, -1.26 28.57, 0 15.58 M0 53.56 C-0.64 39.96, -0.15 24.72, 0 15.58 M0 15.58 C1.92 5.86, 7.17 -0.9, 15.58 0 M0 15.58 C-1.4 5.44, 3.33 1.94, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1078.7678660885126 302.04993981984444) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C27.78 -0.28, 37.93 -2.17, 46.75 0 C53.96 -3.55, 63.42 2.11, 62.34 15.58 C62.89 32.61, 58.78 47.59, 62.34 53.56 C65.37 65.51, 58.11 72.55, 46.75 69.14 C36.52 69.16, 27.44 65.88, 15.58 69.14 C8.28 70.43, -3.55 67.29, 0 53.56 C3.07 42.93, -3.23 32.2, 0 15.58 C-3.35 7.04, 4.83 -3.07, 15.58 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M15.58 0 C24.57 0.94, 35.71 -1.4, 46.75 0 M15.58 0 C25.58 -0.97, 37.62 0.76, 46.75 0 M46.75 0 C57.11 0.33, 61.61 6.45, 62.34 15.58 M46.75 0 C57.95 1.77, 60.87 6.8, 62.34 15.58 M62.34 15.58 C62.84 26.03, 60.95 39.03, 62.34 53.56 M62.34 15.58 C62.25 24.39, 62 35.1, 62.34 53.56 M62.34 53.56 C62.97 64.15, 58.75 70.03, 46.75 69.14 M62.34 53.56 C62.1 64.84, 55.39 68.14, 46.75 69.14 M46.75 69.14 C40.12 67.66, 28.84 67.1, 15.58 69.14 M46.75 69.14 C34.56 67.9, 22.08 68.35, 15.58 69.14 M15.58 69.14 C4.18 69.26, -0.26 63.17, 0 53.56 M15.58 69.14 C4.61 69.1, 0.33 65.89, 0 53.56 M0 53.56 C-0.74 43.92, 1.86 36.91, 0 15.58 M0 53.56 C0.15 41.89, 1.17 30.06, 0 15.58 M0 15.58 C1.97 4.29, 3.98 0.21, 15.58 0 M0 15.58 C-1.87 7.13, 6.91 -2.29, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1229.0182308312778 308.2518908019192) rotate(0 103.4549560546875 26.13343061098295)"><text x="0" y="18.293401427688064" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20.90674448878636px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.waiting </text><text x="0" y="44.42683203867101" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20.90674448878636px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">deque</text></g><g transform="translate(281.9978545244011 307.4453893941227) rotate(0 207.89987182617188 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.scheduler()</text></g><g transform="translate(1044.1975406518209 579.1779831094827) rotate(0 242.00000000000006 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tuple[list[Sequence], bool]:seqs, is_prefill</text></g><g stroke-linecap="round"><g transform="translate(840.177004042383 368.3566466461143) rotate(0 174.7098409235422 100.2230134156225)"><path d="M-0.76 -1 C55.66 9.67, 291.14 31.04, 337.58 64.54 C384.02 98.05, 287.88 177.35, 277.86 200.02 M1.04 1.09 C57.46 11.41, 291.12 29.59, 337.13 62.98 C383.13 96.37, 287.03 178.87, 277.08 201.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(840.177004042383 368.3566466461143) rotate(0 174.7098409235422 100.2230134156225)"><path d="M284.74 177.64 C281.47 184.49, 283.2 188.2, 277.08 201.44 M284.74 177.64 C282.58 185.99, 279.16 193.46, 277.08 201.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(840.177004042383 368.3566466461143) rotate(0 174.7098409235422 100.2230134156225)"><path d="M298.25 188.13 C291.91 192.55, 290.62 193.92, 277.08 201.44 M298.25 188.13 C291.85 193.25, 284.16 197.39, 277.08 201.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1230.649816315804 385.9251021607979) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C24.91 0.74, 31.4 -3.37, 46.75 0 C60.03 3.03, 63.91 6.17, 62.34 15.58 C59.95 29.64, 62.72 44.84, 62.34 53.56 C59.45 67.03, 58.44 65.59, 46.75 69.14 C32.08 71.61, 23.33 65.31, 15.58 69.14 C7.21 65.79, 1.85 63.59, 0 53.56 C0.04 42.28, -2.17 35.46, 0 15.58 C1.18 2.18, 3.82 -0.62, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C24.75 -0.28, 30.68 -0.97, 46.75 0 M15.58 0 C26.26 0.46, 38.46 -0.28, 46.75 0 M46.75 0 C56.47 0.52, 60.47 3.82, 62.34 15.58 M46.75 0 C55.78 -0.97, 64.33 5.29, 62.34 15.58 M62.34 15.58 C61.87 26.01, 62.17 36.77, 62.34 53.56 M62.34 15.58 C61.54 28.24, 62.03 42.36, 62.34 53.56 M62.34 53.56 C60.84 65.81, 55.9 68.25, 46.75 69.14 M62.34 53.56 C60.26 65.79, 56.07 67.22, 46.75 69.14 M46.75 69.14 C37.39 67.82, 30.26 68.58, 15.58 69.14 M46.75 69.14 C38.75 69.98, 29.71 68.61, 15.58 69.14 M15.58 69.14 C3.44 68.2, -1.11 65.61, 0 53.56 M15.58 69.14 C5.67 69.46, -1.3 66.12, 0 53.56 M0 53.56 C0.57 44.39, -1 30.07, 0 15.58 M0 53.56 C1.05 40.76, 0.81 29, 0 15.58 M0 15.58 C1.37 5.91, 5.25 0.29, 15.58 0 M0 15.58 C-1.14 3.16, 2.93 0.69, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1288.9586302109874 533.4735689103036) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g stroke-linecap="round" transform="translate(1364.4217041215454 70.19457985235749) rotate(0 73.10735534858128 70.90032426115431)"><path d="M32 0 C61.04 4.45, 85.88 2.39, 114.21 0 C138.96 -0.06, 144.33 8.29, 146.21 32 C143.47 56.41, 147.66 71.1, 146.21 109.8 C149.55 131.41, 133.82 139.37, 114.21 141.8 C85.3 136.98, 54.2 139.98, 32 141.8 C7.6 139.48, 3.03 130.74, 0 109.8 C2.19 90.2, -0.36 76, 0 32 C-2.89 8.87, 8.19 -2.68, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C57.78 1, 82.58 -0.98, 114.21 0 M32 0 C62.08 0.3, 91.9 -0.65, 114.21 0 M114.21 0 C134.36 -0.85, 147.95 10.75, 146.21 32 M114.21 0 C134.58 -2.24, 144.69 10.55, 146.21 32 M146.21 32 C147.19 57.59, 147.07 82.08, 146.21 109.8 M146.21 32 C145.26 52.88, 145.38 71.45, 146.21 109.8 M146.21 109.8 C144.41 132.74, 134.62 140.13, 114.21 141.8 M146.21 109.8 C145.45 128.89, 133.34 140.58, 114.21 141.8 M114.21 141.8 C92.96 141.18, 73.22 141.98, 32 141.8 M114.21 141.8 C81.71 140.9, 50.41 142.2, 32 141.8 M32 141.8 C11.08 142.08, -1.13 133.02, 0 109.8 M32 141.8 C10.51 142.37, 2.21 131.89, 0 109.8 M0 109.8 C0.56 77.17, 2.03 49.27, 0 32 M0 109.8 C0.29 94.58, -0.36 78.79, 0 32 M0 32 C-0.99 8.9, 8.7 0.6, 32 0 M0 32 C-1.97 12.59, 10.31 1.69, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1371.5290594701269 91.0949041135118) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g transform="translate(1295.8478982664722 123.75004097344572) rotate(0 27.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Block</text></g><g stroke-linecap="round" transform="translate(1513.4698616333476 69.56804522172934) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C57 -2.35, 84.83 0.42, 114.21 0 C134.83 -2.89, 149.3 11.96, 146.21 32 C145.78 45.23, 150.26 64.39, 146.21 109.8 C142.66 133.15, 132.19 143.65, 114.21 141.8 C93.4 140.45, 63.41 138.24, 32 141.8 C8.88 142.98, -3.01 129.75, 0 109.8 C-1.35 85.12, 1.58 62.24, 0 32 C1.56 11.87, 8.44 0.66, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C51.3 -0.87, 71.31 -2.07, 114.21 0 M32 0 C51.89 0.39, 69.62 -0.62, 114.21 0 M114.21 0 C134.22 -0.1, 146.85 10.87, 146.21 32 M114.21 0 C137.39 1.03, 145.97 11.57, 146.21 32 M146.21 32 C147.08 47.91, 147.74 65.56, 146.21 109.8 M146.21 32 C145.05 51.03, 145.18 70.75, 146.21 109.8 M146.21 109.8 C144.29 130.07, 134.53 141.92, 114.21 141.8 M146.21 109.8 C145.91 130.24, 134.96 141.76, 114.21 141.8 M114.21 141.8 C87.33 139.42, 61.59 140.07, 32 141.8 M114.21 141.8 C82.16 142.86, 51.17 142.16, 32 141.8 M32 141.8 C12.59 142.46, 1.97 130.23, 0 109.8 M32 141.8 C9.27 142.05, -1.87 133.07, 0 109.8 M0 109.8 C-1.16 82.02, 1.49 51.57, 0 32 M0 109.8 C-0.6 85.64, -0.47 61.71, 0 32 M0 32 C-0.31 12.14, 11.03 1.37, 32 0 M0 32 C-2.21 12.51, 12.6 1, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1520.5772169819288 90.46836948288365) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(1660.8180894167058 68.4346254201464) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C50.52 -3.05, 73.55 1.13, 114.21 0 C132 3.34, 146.49 8.94, 146.21 32 C143.72 52.1, 143.93 70.02, 146.21 109.8 C145.85 128.07, 133.23 144.83, 114.21 141.8 C88.67 141.9, 63.69 139.35, 32 141.8 C10.05 138.91, -1.8 128.66, 0 109.8 C1.38 93.46, -2.4 75.36, 0 32 C-2.91 9.67, 13.81 0.33, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C52.53 -0.42, 74.95 2.5, 114.21 0 M32 0 C56.35 0.75, 82.34 0.9, 114.21 0 M114.21 0 C137.15 0.89, 146 11.45, 146.21 32 M114.21 0 C133.79 -1, 145.59 12.05, 146.21 32 M146.21 32 C146.05 47.71, 148.55 66.1, 146.21 109.8 M146.21 32 C144.99 48.31, 145.45 65.74, 146.21 109.8 M146.21 109.8 C145.95 130.36, 135.04 141.77, 114.21 141.8 M146.21 109.8 C146.54 133.08, 133.81 140.6, 114.21 141.8 M114.21 141.8 C98.43 141.75, 79.6 140.22, 32 141.8 M114.21 141.8 C82.75 142.33, 50.34 141.55, 32 141.8 M32 141.8 C9.45 142.01, -1.62 132.82, 0 109.8 M32 141.8 C12.38 139.51, 1.15 128.91, 0 109.8 M0 109.8 C0.01 80.15, -2.05 50.51, 0 32 M0 109.8 C0.51 84.86, 0.85 59.14, 0 32 M0 32 C-1.92 12.27, 12.35 0.87, 32 0 M0 32 C0.62 12.84, 10.63 -1.2, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1667.925444765287 89.33494968130071) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g transform="translate(1816.6670035448328 115.06628339373492) rotate(0 23.099990844726562 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g stroke-linecap="round" transform="translate(1867.3891259452967 69.31455939864645) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C59.9 -3.1, 84.81 1.37, 114.21 0 C136.61 -3.56, 148.23 7.31, 146.21 32 C143.76 62.36, 145.68 83.53, 146.21 109.8 C143.61 129.35, 136.72 138.79, 114.21 141.8 C90.9 138.13, 68.51 141.06, 32 141.8 C7.12 143.36, 1.2 128.91, 0 109.8 C4.27 85.38, 4.53 57.36, 0 32 C-3.07 8.66, 7.71 2.2, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C61.85 -0.98, 95.48 0.98, 114.21 0 M32 0 C57.39 0.02, 82.22 -0.8, 114.21 0 M114.21 0 C135.01 1.21, 144.72 12.54, 146.21 32 M114.21 0 C134.12 -1.03, 144.14 12.52, 146.21 32 M146.21 32 C143.61 49.79, 144.5 70.42, 146.21 109.8 M146.21 32 C145.86 55.79, 146.26 80.47, 146.21 109.8 M146.21 109.8 C144.71 130.09, 133.79 140.86, 114.21 141.8 M146.21 109.8 C144.94 133.04, 136.02 142.12, 114.21 141.8 M114.21 141.8 C94.68 143.66, 74.81 143.72, 32 141.8 M114.21 141.8 C92.45 142.73, 73.06 140.89, 32 141.8 M32 141.8 C11.67 139.87, 1.37 131.85, 0 109.8 M32 141.8 C10.73 142.13, -1.14 129.1, 0 109.8 M0 109.8 C1.44 93.81, 1.24 78.81, 0 32 M0 109.8 C1.59 81.58, 1.02 53.43, 0 32 M0 32 C-0.03 9.62, 9.35 -0.52, 32 0 M0 32 C0.25 10.21, 8.82 1.97, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1874.4964812938779 90.21488365980076) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(2016.4372834570986 68.6880247680183) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C53.77 -4.69, 75.44 -4.48, 114.21 0 C137.39 -0.36, 143.15 8.35, 146.21 32 C143.45 60.1, 147.24 88.77, 146.21 109.8 C144.84 130.52, 132.65 140, 114.21 141.8 C91.66 143.54, 77.4 139.76, 32 141.8 C11.32 138.89, -1 134.28, 0 109.8 C-4.39 83.74, -4.28 63.87, 0 32 C1.42 9.01, 12.59 3.5, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C51.4 1.34, 71.3 -0.47, 114.21 0 M32 0 C59.61 0.96, 87.01 1.29, 114.21 0 M114.21 0 C134.3 -0.89, 144.41 12.27, 146.21 32 M114.21 0 C134.48 -1.92, 145.45 8.42, 146.21 32 M146.21 32 C145.92 47.6, 145.03 63.21, 146.21 109.8 M146.21 32 C145.57 54.69, 145.45 77.96, 146.21 109.8 M146.21 109.8 C145.1 132.79, 135.96 142.08, 114.21 141.8 M146.21 109.8 C144.92 133.31, 135.39 142.37, 114.21 141.8 M114.21 141.8 C80.75 141.39, 49.31 140.99, 32 141.8 M114.21 141.8 C83.13 140.01, 51.73 141.34, 32 141.8 M32 141.8 C10.73 142.09, -0.99 129.36, 0 109.8 M32 141.8 C8.4 142.49, -1.97 133.05, 0 109.8 M0 109.8 C0.79 85.76, 1.03 67.24, 0 32 M0 109.8 C-0.23 82.55, -0.87 56.08, 0 32 M0 32 C0.22 10.27, 9.06 1.71, 32 0 M0 32 C0.83 8.4, 12.8 0.18, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2023.5446388056798 89.5883490291726) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(2163.785511240457 67.55460496643536) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C50.38 1.02, 62.01 -0.94, 114.21 0 C138.58 -0.4, 143.09 8.06, 146.21 32 C145.29 50.86, 143.78 69.16, 146.21 109.8 C143.74 128.45, 136 138.25, 114.21 141.8 C86.65 137.98, 56.77 144.03, 32 141.8 C11 145.19, -2.92 128.06, 0 109.8 C2.57 89.14, 3.08 75.28, 0 32 C-2 8.16, 9.9 -2.26, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C64.04 -1.44, 93.65 -0.45, 114.21 0 M32 0 C61 -1.22, 90.35 0.04, 114.21 0 M114.21 0 C134.62 -1.67, 145.55 8.72, 146.21 32 M114.21 0 C133.34 -1.22, 145.04 10.81, 146.21 32 M146.21 32 C145.88 54.61, 147.61 75.13, 146.21 109.8 M146.21 32 C144.98 52.1, 145.74 70.67, 146.21 109.8 M146.21 109.8 C145.09 133.02, 135.41 142.29, 114.21 141.8 M146.21 109.8 C148.42 131.89, 137.82 140.76, 114.21 141.8 M114.21 141.8 C96.24 142.63, 72.91 142.14, 32 141.8 M114.21 141.8 C97.52 142.24, 80.27 141.21, 32 141.8 M32 141.8 C8.7 142.4, -1.72 132.8, 0 109.8 M32 141.8 C10.31 143.49, 0.42 132.71, 0 109.8 M0 109.8 C0.25 94.47, 1.27 78.03, 0 32 M0 109.8 C0.62 90.33, -0.29 72.11, 0 32 M0 32 C0.72 8.69, 12.52 0.15, 32 0 M0 32 C-1.11 9.11, 12.42 0.68, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2170.892866589038 88.45492922758967) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(1279.4129382191825 61.127005251673836) rotate(0 521.3860367718842 76.50777689435017)"><path d="M32 0 C251.45 0.46, 470.68 0.56, 1010.77 0 M32 0 C281.71 -3.48, 531.65 -3.54, 1010.77 0 M1010.77 0 C1030.18 -1.06, 1041.75 10.79, 1042.77 32 M1010.77 0 C1031.8 -0.89, 1042.19 10.63, 1042.77 32 M1042.77 32 C1042.48 58.22, 1042.59 86.85, 1042.77 121.02 M1042.77 32 C1042.39 67.04, 1042.89 100.43, 1042.77 121.02 M1042.77 121.02 C1044.69 143.01, 1034.08 152.11, 1010.77 153.02 M1042.77 121.02 C1041.37 142.59, 1030.24 154.95, 1010.77 153.02 M1010.77 153.02 C643.36 155.53, 277.77 155, 32 153.02 M1010.77 153.02 C702.6 149.67, 394.87 149.88, 32 153.02 M32 153.02 C10.35 154.49, 0.36 143.72, 0 121.02 M32 153.02 C8.46 154.86, 1.94 143.35, 0 121.02 M0 121.02 C-1.89 90.59, -1.36 63.03, 0 32 M0 121.02 C1.08 95.09, 1.64 71.21, 0 32 M0 32 C-0.96 9.32, 12.19 0.59, 32 0 M0 32 C-2.27 11.95, 8.52 1.18, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2336.545481422152 27.34327396318622) rotate(0 146.29994201660156 35)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CPU上的逻辑Block:</text><text x="0" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.blocks</text></g><g transform="translate(1381.521539836991 10) rotate(0 400.3998413085938 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">len(BlockManager.blocks) = config.num_kvcache_blocks</text></g><g transform="translate(1631.6270283305853 223.01205231559106) rotate(0 504.6998596191406 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">max(len(token_ids)) = config.block_size 即一个block管理的tokens数量</text></g><g transform="translate(2338.1674702601863 103.60514307125413) rotate(0 153.99993896484375 52.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">deque: free_block_id</text><text x="0" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">set: used_blocl_id</text><text x="0" y="94.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">管理blocks</text></g><g stroke-linecap="round" transform="translate(1229.076376369675 461.2245413500714) rotate(0 31.16977417810415 34.570174105069775)"><path d="M15.58 0 C21.95 -2.03, 29.22 0.9, 46.75 0 C53.6 1.56, 63.54 2.97, 62.34 15.58 C64.93 28, 65.18 36.83, 62.34 53.56 C59.27 61.94, 54.19 71.34, 46.75 69.14 C39.68 67.44, 23.08 68.67, 15.58 69.14 C2.94 71.9, 0.91 67, 0 53.56 C-0.44 39.28, 1.5 33.78, 0 15.58 C-0.82 6.63, 7.67 -1.32, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C21.53 -1.82, 30.32 -0.91, 46.75 0 M15.58 0 C24.87 0.1, 34.81 0.97, 46.75 0 M46.75 0 C55.64 -1.05, 60.58 4.26, 62.34 15.58 M46.75 0 C55.87 1.91, 62.81 5.51, 62.34 15.58 M62.34 15.58 C63.19 26.76, 63.36 36.06, 62.34 53.56 M62.34 15.58 C61.3 26.1, 62.85 33.94, 62.34 53.56 M62.34 53.56 C63.34 62.01, 58.51 69.85, 46.75 69.14 M62.34 53.56 C62.41 64.28, 56 67.1, 46.75 69.14 M46.75 69.14 C42.14 68.56, 35.67 69.24, 15.58 69.14 M46.75 69.14 C36.11 69.83, 24.06 70.34, 15.58 69.14 M15.58 69.14 C5.16 68.09, -1.32 63.43, 0 53.56 M15.58 69.14 C5.44 68.68, -1.85 65.91, 0 53.56 M0 53.56 C0.53 39.84, -0.98 29.57, 0 15.58 M0 53.56 C-0.56 41.56, 0.28 27.68, 0 15.58 M0 15.58 C-1.29 6.88, 4.97 -1.73, 15.58 0 M0 15.58 C-1.67 4.05, 5.95 -1.92, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1300.0278584948146 396.711846342052) rotate(0 115.5 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5]</text></g><g transform="translate(1299.11961903265 474.5693446225596) rotate(0 154 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde fg"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,33,6,7]</text></g><g stroke-linecap="round" transform="translate(1615.472571398816 328.0856595866826) rotate(0 58.76416173680809 103.662660736722)"><path d="M29.38 0 C43.25 -0.43, 58.63 0.36, 88.15 0 M29.38 0 C51.11 -0.16, 74.03 1.14, 88.15 0 M88.15 0 C108.14 0.28, 116.4 11.68, 117.53 29.38 M88.15 0 C107.58 0.57, 119.74 10.55, 117.53 29.38 M117.53 29.38 C117.07 86.98, 118.54 149.31, 117.53 177.94 M117.53 29.38 C118.96 59.49, 118.3 89.03, 117.53 177.94 M117.53 177.94 C116.53 195.76, 105.76 207.92, 88.15 207.33 M117.53 177.94 C115.55 199.45, 107.37 209.02, 88.15 207.33 M88.15 207.33 C71.05 208.44, 51.63 207.3, 29.38 207.33 M88.15 207.33 C64.29 206.76, 41.87 206.82, 29.38 207.33 M29.38 207.33 C8.19 209.04, 0.72 195.56, 0 177.94 M29.38 207.33 C11.93 207.5, -1.11 195.98, 0 177.94 M0 177.94 C0.68 120.19, 0.59 65.96, 0 29.38 M0 177.94 C0.85 145.16, 0.23 113.62, 0 29.38 M0 29.38 C0.65 8.12, 9.03 -0.34, 29.38 0 M0 29.38 C-1.85 8.65, 8.21 -1.71, 29.38 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1628.036751446171 361.7483203234046) rotate(0 46.199981689453125 70)"><text x="46.199981689453125" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockM</text><text x="46.199981689453125" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">anager</text><text x="46.199981689453125" y="94.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">.alloc</text><text x="46.199981689453125" y="129.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ate()</text></g><g stroke-linecap="round"><g transform="translate(1542.0278584948146 401.47059959732724) rotate(0 31.26744255515689 1.8169258811182196)"><path d="M0.17 1.02 C6.81 2.77, 29.32 12.03, 39.53 10.5 C49.73 8.97, 57.68 -5.33, 61.39 -8.18 M-1.2 0.5 C5.84 2.41, 30.94 12.99, 41.76 11.71 C52.58 10.43, 60.41 -3.77, 63.73 -7.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1542.0278584948146 401.47059959732724) rotate(0 31.26744255515689 1.8169258811182196)"><path d="M59.27 6.59 C61.72 1.72, 60.96 -2.24, 63.73 -7.16 M59.27 6.59 C60.62 3.17, 61.2 0.28, 63.73 -7.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1542.0278584948146 401.47059959732724) rotate(0 31.26744255515689 1.8169258811182196)"><path d="M51.47 0.5 C56.06 -2.71, 57.45 -4.99, 63.73 -7.16 M51.47 0.5 C54.77 -1.44, 57.31 -2.79, 63.73 -7.16" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1488.8481400752767 463.5693446225596) rotate(0 57.025784550001845 2.2808991908295457)"><path d="M-0.91 -0.63 C13.99 -2.18, 70.23 -10.6, 89.54 -8.29 C108.86 -5.98, 110.57 9.8, 114.96 13.25 M0.82 1.66 C16.06 0.78, 72.87 -8.68, 91.7 -7.05 C110.54 -5.42, 109.75 7.99, 113.84 11.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1488.8481400752767 463.5693446225596) rotate(0 57.025784550001845 2.2808991908295457)"><path d="M101.54 1.18 C104.66 3.09, 108.61 6.83, 113.84 11.43 M101.54 1.18 C105.82 5.84, 110.93 9.21, 113.84 11.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1488.8481400752767 463.5693446225596) rotate(0 57.025784550001845 2.2808991908295457)"><path d="M111.01 -4.33 C111.2 -0.76, 112.17 4.71, 113.84 11.43 M111.01 -4.33 C111.68 2.46, 113.16 7.94, 113.84 11.43" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1742.9049738673675 327.4252591980712) rotate(0 232.41570026455224 22.5)"><path d="M11.25 0 C110.11 1.38, 210.72 2.13, 453.58 0 M11.25 0 C150 -1.95, 289.3 -1.91, 453.58 0 M453.58 0 C463.05 -0.9, 463.61 3.96, 464.83 11.25 M453.58 0 C459.21 1.94, 466.55 1.46, 464.83 11.25 M464.83 11.25 C465.33 19.19, 464.9 26.01, 464.83 33.75 M464.83 11.25 C463.75 16.84, 464.45 21.5, 464.83 33.75 M464.83 33.75 C465.19 42.62, 459.16 46.6, 453.58 45 M464.83 33.75 C466.77 42.25, 461.7 47.18, 453.58 45 M453.58 45 C321.36 43.66, 189.46 42.75, 11.25 45 M453.58 45 C283.47 42.87, 112.19 42.5, 11.25 45 M11.25 45 C5.27 45.59, -1.98 42.37, 0 33.75 M11.25 45 C1.61 46.18, -0.23 39.29, 0 33.75 M0 33.75 C-1.92 27, -1.18 23.8, 0 11.25 M0 33.75 C-0.72 28.38, -0.6 23.27, 0 11.25 M0 11.25 C0.25 1.78, 4.62 0.67, 11.25 0 M0 11.25 C-1.42 4.17, 1.89 -0.64, 11.25 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1775.120753477623 332.4252591980712) rotate(0 200.19992065429688 17.5)"><text x="200.19992065429688" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.free_block_id</text></g><g stroke-linecap="round"><g transform="translate(1744.0008948724321 408.4482884410809) rotate(0 59.2836630119931 32.54609386910218)"><path d="M0.25 0.17 C8.75 -4.18, 30.49 -40.77, 50.39 -25.09 C70.29 -9.41, 107.9 74.34, 119.65 94.25 M-1.08 -0.79 C7.88 -5.53, 32.76 -42.7, 52.75 -26.61 C72.73 -10.53, 107.96 75.34, 118.84 95.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1744.0008948724321 408.4482884410809) rotate(0 59.2836630119931 32.54609386910218)"><path d="M101.07 78.13 C105.84 81.27, 111.79 86.56, 118.84 95.72 M101.07 78.13 C108 83.33, 112.17 89.6, 118.84 95.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1744.0008948724321 408.4482884410809) rotate(0 59.2836630119931 32.54609386910218)"><path d="M116.53 70.83 C117.58 75.78, 119.76 82.85, 118.84 95.72 M116.53 70.83 C118.51 78.45, 117.66 87.09, 118.84 95.72" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1732.523452153369 519.9735092455539) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C48.26 1.34, 71.33 -2.58, 114.21 0 C133.04 -0.77, 143.96 13.43, 146.21 32 C145.51 55.6, 146.61 79.79, 146.21 109.8 C147.35 134.26, 134.73 143.24, 114.21 141.8 C80.65 140.68, 52.81 140.06, 32 141.8 C10.49 144.63, 3.21 131.93, 0 109.8 C1.62 89.58, -0.31 68.67, 0 32 C-1.98 8.99, 7.2 2.98, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C60.23 0.33, 85.18 2.38, 114.21 0 M32 0 C58.77 0.48, 85.95 1.21, 114.21 0 M114.21 0 C137.04 -1.99, 147.22 8.74, 146.21 32 M114.21 0 C137.12 0.82, 146.28 11, 146.21 32 M146.21 32 C146.13 49.75, 147.2 70.63, 146.21 109.8 M146.21 32 C145.4 61.87, 147.2 90.57, 146.21 109.8 M146.21 109.8 C146.75 133.03, 135.51 140.76, 114.21 141.8 M146.21 109.8 C144.7 130.54, 135.8 141.34, 114.21 141.8 M114.21 141.8 C94.19 143.95, 78.26 141.14, 32 141.8 M114.21 141.8 C94.11 142.6, 75.05 142.56, 32 141.8 M32 141.8 C10.47 140.1, -1.29 132.82, 0 109.8 M32 141.8 C10.41 139.81, -1.67 129.99, 0 109.8 M0 109.8 C0.31 82.31, -0.35 56.66, 0 32 M0 109.8 C0.34 92.59, -0.72 74.89, 0 32 M0 32 C-1.62 10.11, 12.41 0.19, 32 0 M0 32 C2.17 8.8, 8.71 -1.28, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1739.6308075019501 528.3738335067083) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=1</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=1234</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,2,3,4]</text></g><g stroke-linecap="round" transform="translate(1881.745150809179 519.9735092455521) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C58.55 0.05, 87.87 3.58, 114.21 0 C136.46 3.06, 146.27 8.77, 146.21 32 C147.04 54.79, 145.09 72.75, 146.21 109.8 C148.69 129.82, 136.16 138.55, 114.21 141.8 C92.51 143.81, 74.36 141.78, 32 141.8 C9.65 140, -3.1 132.05, 0 109.8 C-1.59 82.81, -3.07 62.15, 0 32 C3.03 12.95, 9.56 2.44, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C56.77 1.18, 79.31 -2.01, 114.21 0 M32 0 C58.29 -1.69, 83.58 -1.66, 114.21 0 M114.21 0 C136.92 0.71, 146.27 10.96, 146.21 32 M114.21 0 C134.4 -2.04, 143.95 11.36, 146.21 32 M146.21 32 C148.34 49.03, 148.23 63.41, 146.21 109.8 M146.21 32 C147.14 62.51, 146.85 90.61, 146.21 109.8 M146.21 109.8 C144.89 130.62, 135.77 141.4, 114.21 141.8 M146.21 109.8 C144.37 133.1, 136.38 139.53, 114.21 141.8 M114.21 141.8 C80.57 142.93, 50.22 139.43, 32 141.8 M114.21 141.8 C84.85 141.37, 55.05 143.06, 32 141.8 M32 141.8 C10.45 140.07, -1.45 130.14, 0 109.8 M32 141.8 C11.42 139.88, -0.88 130.74, 0 109.8 M0 109.8 C-1.1 92.96, -1.58 76.49, 0 32 M0 109.8 C-0.33 83.59, 1.35 58.02, 0 32 M0 32 C1.89 9.04, 8.96 -1.11, 32 0 M0 32 C-1.89 12.07, 11.57 -1.06, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1888.8525061577602 528.3738335067064) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=1</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[5</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,]</text></g><g transform="translate(1172.5290827021502 228.20506978972116) rotate(0 216.2999420166015 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">设此案例中config.block_size=4</text></g><g transform="translate(1295.0430729854816 367.08686532286447) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g stroke-linecap="round" transform="translate(2111.5195013930443 526.5762285755081) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C45.94 -2.17, 69.04 -0.25, 114.21 0 C132.43 -2.61, 144.43 11.84, 146.21 32 C142.78 47.04, 143.2 62.99, 146.21 109.8 C146.67 127.59, 137.11 143, 114.21 141.8 C93.63 143.75, 75.39 144, 32 141.8 C7.75 138.73, -2 128.18, 0 109.8 C1.37 85.22, -2.55 51.12, 0 32 C-0.77 8.41, 13.43 0.91, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C48 0.39, 66.05 0.75, 114.21 0 M114.21 0 C136.26 0.06, 146.5 9.67, 146.21 32 M146.21 32 C143.73 50.12, 145.14 66.37, 146.21 109.8 M146.21 109.8 C146.58 132.5, 133.63 143.4, 114.21 141.8 M114.21 141.8 C84.53 141.99, 50 140.7, 32 141.8 M32 141.8 C10.15 142.02, -0.4 129.53, 0 109.8 M0 109.8 C1.58 79.95, -1.24 48.45, 0 32 M0 32 C1.52 11.26, 8.69 1.12, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(2118.6268567416255 534.9765528366624) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=1234</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,2,3,4]</text></g><g stroke-linecap="round"><g transform="translate(2201.5838707502166 679.3768770978168) rotate(0 -188.22297259405104 9.474853910657103)"><path d="M0.82 0.43 C-34.01 5.05, -145.39 27.91, -208.4 26.56 C-271.42 25.21, -349.02 -2.2, -377.27 -7.67" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(2201.5838707502166 679.3768770978168) rotate(0 -188.22297259405104 9.474853910657103)"><path d="M-352.38 -10.08 C-360.41 -9, -369.54 -9.21, -377.27 -7.67" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(2201.5838707502166 679.3768770978168) rotate(0 -188.22297259405104 9.474853910657103)"><path d="M-356.65 6.48 C-363.02 1.73, -370.66 -4.28, -377.27 -7.67" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(1615.1331387824634 730.1216799568429) rotate(0 527 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref, 因为seqA和seqB前4个tokens完全一样，计算出来的hash值是一样的</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seqA使用的block0可以被seqB ref,注意此时block0 ref_count+=1, 同时SeqB.num_cached_tokens+=block_size</text></g><g stroke-linecap="round" transform="translate(2260.7409985498516 526.57622857551) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C53.48 -0.41, 74.34 -2.39, 114.21 0 C134.77 -2, 146.04 13.49, 146.21 32 C144.73 59.18, 147.44 93.47, 146.21 109.8 C145.21 132.28, 133.56 140.12, 114.21 141.8 C99.75 141.94, 83.15 141.66, 32 141.8 C13.37 140.2, 1.77 131.47, 0 109.8 C3.83 82.65, 3.47 58.65, 0 32 C-3.07 9.62, 13.55 0.1, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C55.13 -1.56, 82.41 -1.31, 114.21 0 M32 0 C63.71 0.08, 94.1 0.19, 114.21 0 M114.21 0 C137.23 0.87, 146.75 12.56, 146.21 32 M114.21 0 C135.51 -1.2, 144.7 10.07, 146.21 32 M146.21 32 C147.77 56.9, 144.09 82.23, 146.21 109.8 M146.21 32 C146.6 56.23, 144.85 80.43, 146.21 109.8 M146.21 109.8 C144.35 132.16, 135.35 140.1, 114.21 141.8 M146.21 109.8 C144.73 133.07, 135.29 139.81, 114.21 141.8 M114.21 141.8 C93.84 141.3, 76.46 140.46, 32 141.8 M114.21 141.8 C93.78 140.2, 73.52 141.52, 32 141.8 M32 141.8 C9.43 142.16, -1.62 130.58, 0 109.8 M32 141.8 C12.67 142.01, 2.17 129.27, 0 109.8 M0 109.8 C1.65 93.88, -0.48 77.46, 0 32 M0 109.8 C0.22 78.27, 1.2 48.24, 0 32 M0 32 C1.7 10.7, 9.61 -0.95, 32 0 M0 32 C-0.51 8.87, 11.39 2, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2267.848353898433 534.9765528366643) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=2</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=53367</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[5</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,33,6,7]</text></g><g stroke-linecap="round"><g transform="translate(1744.0008948724321 460.3473856302862) rotate(0 240.13084464627786 -12.71372182804653)"><path d="M-1.03 1 C50.04 -12.24, 224.86 -88.27, 305.24 -79.09 C385.63 -69.92, 452.18 33.5, 481.29 56.05 M0.63 0.48 C51.63 -13.12, 224.19 -89.69, 304.2 -80.75 C384.2 -71.81, 451.41 31.66, 480.64 54.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1744.0008948724321 460.3473856302862) rotate(0 240.13084464627786 -12.71372182804653)"><path d="M458.2 43.12 C464.42 45.22, 468.75 48.11, 480.64 54.14 M458.2 43.12 C467.2 47.43, 474.9 52, 480.64 54.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1744.0008948724321 460.3473856302862) rotate(0 240.13084464627786 -12.71372182804653)"><path d="M470.53 31.27 C474.31 35.65, 476.15 40.94, 480.64 54.14 M470.53 31.27 C474.88 40.05, 478.03 48.98, 480.64 54.14" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1945.6083363976154 508.9735092455521) rotate(0 0.016040449232718856 -14.122197026074357)"><path d="M-0.09 0.4 C0.01 -4.45, 0.17 -23.82, 0.1 -28.65" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(1945.6083363976154 508.9735092455521) rotate(0 0.016040449232718856 -14.122197026074357)"><path d="M5.08 -15.02 C4.49 -17.81, 3.39 -21.56, 0.1 -28.65" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(1945.6083363976154 508.9735092455521) rotate(0 0.016040449232718856 -14.122197026074357)"><path d="M-4.85 -15.01 C-3.31 -17.79, -2.29 -21.54, 0.1 -28.65" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(1865.7153922053471 428.44694806473854) rotate(0 125 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">注意只有block被token填满</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block的hash才不为-1</text></g><g stroke-linecap="round" transform="translate(2223.1337530219816 329.9276768704476) rotate(0 232.41570026455224 22.5)"><path d="M11.25 0 C152.77 2.94, 293.13 2.37, 453.58 0 M11.25 0 C185.51 1.02, 360.47 1.05, 453.58 0 M453.58 0 C459.47 1.71, 465.55 1.78, 464.83 11.25 M453.58 0 C463.22 0.18, 463.73 2.2, 464.83 11.25 M464.83 11.25 C466.02 17.85, 465.92 27.98, 464.83 33.75 M464.83 11.25 C464.58 15.22, 463.96 20.42, 464.83 33.75 M464.83 33.75 C465.48 39.58, 460.32 44.66, 453.58 45 M464.83 33.75 C462.98 40.1, 459.5 43.29, 453.58 45 M453.58 45 C315.66 45.34, 177.26 45.15, 11.25 45 M453.58 45 C333.63 44.8, 212.33 44.93, 11.25 45 M11.25 45 C2.11 46.22, 0.79 40.33, 0 33.75 M11.25 45 C4.98 47.24, -1.28 39.65, 0 33.75 M0 33.75 C0.65 29.18, 0.17 20.16, 0 11.25 M0 33.75 C0.37 28.93, -0.18 22.78, 0 11.25 M0 11.25 C1.37 3.02, 4.09 -1.81, 11.25 0 M0 11.25 C-0.88 3.25, 2.48 -0.11, 11.25 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2255.3495326322372 334.9276768704476) rotate(0 200.19992065429676 17.5)"><text x="200.19992065429688" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.used_block_id</text></g><g transform="translate(2241.4324972112663 407.35140264608344) rotate(0 143 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id 0,1,2 add into </text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">blockManager.used_block_id</text></g><g stroke-linecap="round"><g transform="translate(1692.0639544271044 642.3750644302636) rotate(0 -85.46857778204287 -15.226057411872617)"><path d="M-0.02 -0.63 C-15.17 -6.15, -62.22 -30.31, -90.59 -32 C-118.96 -33.7, -156.77 -14.55, -170.22 -10.8 M-1.49 1.66 C-16.29 -3.18, -60.06 -28.75, -88.29 -30.63 C-116.53 -32.51, -157.04 -12.79, -170.92 -9.61" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1692.0639544271044 642.3750644302636) rotate(0 -85.46857778204287 -15.226057411872617)"><path d="M-151.4 -25.23 C-158.68 -21.45, -164.53 -14.8, -170.92 -9.61 M-151.4 -25.23 C-156.63 -21.67, -161.53 -16.23, -170.92 -9.61" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1692.0639544271044 642.3750644302636) rotate(0 -85.46857778204287 -15.226057411872617)"><path d="M-145.92 -9.03 C-155.15 -10.55, -162.79 -9.2, -170.92 -9.61 M-145.92 -9.03 C-152.56 -9.97, -159 -9.06, -170.92 -9.61" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1468.8921216741912 666.805156175953) rotate(0 175.99999999999994 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">sequence A and B update:</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seq.block_table.append(block_id)</text></g><g stroke-linecap="round" transform="translate(1189.4600603899394 622.3308527011977) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C26.2 3.57, 33.14 -0.57, 46.75 0 C59.59 -1.38, 65.04 3.6, 62.34 15.58 C59.35 30.62, 65.05 39.66, 62.34 53.56 C64.62 62.23, 54.07 68.09, 46.75 69.14 C38.36 68.96, 19.7 66.43, 15.58 69.14 C4.51 67.67, -2.51 60.84, 0 53.56 C1.68 48.47, 2.59 37.84, 0 15.58 C-1.09 8.73, 7.79 -3.58, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C22.48 -1.64, 31.88 0.69, 46.75 0 M15.58 0 C21.38 -0.7, 28.9 0.27, 46.75 0 M46.75 0 C55.17 1.12, 60.48 6.22, 62.34 15.58 M46.75 0 C56.91 -1.96, 60.86 7.13, 62.34 15.58 M62.34 15.58 C61.02 27.21, 60.34 36.77, 62.34 53.56 M62.34 15.58 C61.35 25.58, 62.16 36.08, 62.34 53.56 M62.34 53.56 C63.21 64.61, 55.91 69.5, 46.75 69.14 M62.34 53.56 C60.48 63.31, 59.15 69.35, 46.75 69.14 M46.75 69.14 C33.35 67.23, 23.4 69.66, 15.58 69.14 M46.75 69.14 C38.28 68.75, 30.7 68.82, 15.58 69.14 M15.58 69.14 C6.73 69.65, 1.7 63.98, 0 53.56 M15.58 69.14 C3.99 68.05, -0.51 62.14, 0 53.56 M0 53.56 C0.47 42.34, -1.06 28.71, 0 15.58 M0 53.56 C-0.41 45.55, 0.93 38.53, 0 15.58 M0 15.58 C0.44 4.63, 4.2 -1.72, 15.58 0 M0 15.58 C0.59 5.78, 4.55 0.73, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1188.139435924347 700.2430616940801) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C24.22 -1.58, 30.73 -1.86, 46.75 0 C59.85 -1.6, 64.11 5.53, 62.34 15.58 C64.4 25.21, 64.04 37.99, 62.34 53.56 C59.27 62.89, 60.03 69.25, 46.75 69.14 C36.94 67.01, 33.16 67.72, 15.58 69.14 C2.69 66.03, -3.21 64, 0 53.56 C2.28 42.41, -1.41 34.2, 0 15.58 C2.6 1.62, 6.15 2.85, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C26.99 0.97, 32.99 2.11, 46.75 0 M15.58 0 C25.94 0.5, 33.78 0.77, 46.75 0 M46.75 0 C55.28 1.03, 62.14 3.49, 62.34 15.58 M46.75 0 C55.66 1.94, 62.09 3.2, 62.34 15.58 M62.34 15.58 C60.48 23.46, 61.81 31.26, 62.34 53.56 M62.34 15.58 C62.2 24.1, 62.51 34.91, 62.34 53.56 M62.34 53.56 C61.1 64.31, 55.53 68.58, 46.75 69.14 M62.34 53.56 C64.35 64.16, 59.31 67.27, 46.75 69.14 M46.75 69.14 C41.28 69.67, 32.45 69.96, 15.58 69.14 M46.75 69.14 C34.16 68.3, 22.76 69.18, 15.58 69.14 M15.58 69.14 C6.89 69.17, -1.05 63, 0 53.56 M15.58 69.14 C4.69 67.34, 0.73 65.94, 0 53.56 M0 53.56 C-0.88 43.36, -1.96 31.73, 0 15.58 M0 53.56 C1 43.88, 0.43 32.13, 0 15.58 M0 15.58 C-1 3.47, 5.71 0.51, 15.58 0 M0 15.58 C-0.64 5.93, 3.93 -1.07, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1267.311671949566 625.9134429072401) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g transform="translate(1265.991047483974 739.480195232587) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g transform="translate(1268.2075923870398 647.6064402788033) rotate(0 93.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_table=[0,1]</text></g><g transform="translate(1265.9994099831088 711.748794196672) rotate(0 93.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_table=[0,2]</text></g><g stroke-linecap="round" transform="translate(267.19707768531487 293.7514636586857) rotate(0 1215.3028042930828 249.58279822855042)"><path d="M32 0 C922.37 0, 1812.73 0, 2398.61 0 M32 0 C540.38 0, 1048.76 0, 2398.61 0 M2398.61 0 C2419.94 0, 2430.61 10.67, 2430.61 32 M2398.61 0 C2419.94 0, 2430.61 10.67, 2430.61 32 M2430.61 32 C2430.61 168.01, 2430.61 304.03, 2430.61 467.17 M2430.61 32 C2430.61 150.46, 2430.61 268.93, 2430.61 467.17 M2430.61 467.17 C2430.61 488.5, 2419.94 499.17, 2398.61 499.17 M2430.61 467.17 C2430.61 488.5, 2419.94 499.17, 2398.61 499.17 M2398.61 499.17 C1739.09 499.17, 1079.57 499.17, 32 499.17 M2398.61 499.17 C1800.64 499.17, 1202.68 499.17, 32 499.17 M32 499.17 C10.67 499.17, 0 488.5, 0 467.17 M32 499.17 C10.67 499.17, 0 488.5, 0 467.17 M0 467.17 C0 302.43, 0 137.7, 0 32 M0 467.17 C0 325.59, 0 184.01, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(855.3648185577508 171.75024308413413) rotate(0 65.13562712495343 60.19068990270536)"><path d="M-1.12 0.62 C-23.62 9.02, -181.88 31.13, -136.17 51.11 C-90.46 71.09, 204.82 109.27, 273.14 120.49 M0.5 -0.11 C-22.07 8.35, -183.04 32.31, -137.18 52.11 C-91.33 71.91, 207.11 107.53, 275.63 118.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(855.3648185577508 171.75024308413413) rotate(0 65.13562712495343 60.19068990270536)"><path d="M251.18 123.88 C257.09 122.86, 259.28 120.72, 275.63 118.68 M251.18 123.88 C259.85 121.59, 270.3 119.26, 275.63 118.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(855.3648185577508 171.75024308413413) rotate(0 65.13562712495343 60.19068990270536)"><path d="M253.56 106.94 C259.09 109.31, 260.8 110.58, 275.63 118.68 M253.56 106.94 C261.3 111.15, 270.83 115.31, 275.63 118.68" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2283.6678481899694 503.71795850118724) rotate(0 181.86575102242932 -58.887775479697176)"><path d="M-0.12 -1.02 C38.89 -4.92, 172.05 -3.12, 232.96 -22.76 C293.88 -42.39, 343.43 -102.89, 365.37 -118.83 M-1.64 1.06 C37.85 -3.21, 174.24 -4.5, 235.27 -24.35 C296.3 -44.2, 343.01 -102.52, 364.54 -118.06" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2283.6678481899694 503.71795850118724) rotate(0 181.86575102242932 -58.887775479697176)"><path d="M352.82 -95.98 C353.43 -101.82, 359.24 -105.32, 364.54 -118.06 M352.82 -95.98 C355.81 -101.46, 357.6 -105.51, 364.54 -118.06" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2283.6678481899694 503.71795850118724) rotate(0 181.86575102242932 -58.887775479697176)"><path d="M341.37 -108.68 C344.41 -111.88, 352.59 -112.75, 364.54 -118.06 M341.37 -108.68 C346.7 -111.4, 350.94 -112.73, 364.54 -118.06" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(285.02442491367117 375.19993479993536) rotate(0 367.5 187.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">优先prefill </text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">while self.waiting and num_seqs &lt; self.max_num_seqs:</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    不断地从scheduler.waiting deque取Sequence</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    直到整个batch的tokens num &gt;= config.max_num_batched_tokens</text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    或者blockManager没有free block可为新Seqence token分配</text><text x="0" y="142.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">再decode</text><text x="0" y="167.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">while self.running and num_seqs &lt; self.max_num_seqs:</text><text x="0" y="192.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    不断地从scheduler.running deque取Sequence</text><text x="0" y="217.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    直到blockManager没有free block可为新decode出来的Seqence token分配</text><text x="0" y="242.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    期间会尝试将running deque最右侧(即优先度最低)的Sequence驱逐</text><text x="0" y="267.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    (scheduler.preempt())出去即将Sequence放回到waiting deque</text><text x="0" y="292.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    同时释放掉Sequence占用的资源，即BlockManager中的block</text><text x="0" y="317.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="342.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">返回值为list[Sequence]和is_prefill, 在nano-vllm中一次forward只能处理</text><text x="0" y="367.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prefill和decode其中一种</text></g><g transform="translate(275.6054142500442 183.24071423777968) rotate(0 197.9998779296875 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LLMEngine.generate()</text></g><g transform="translate(753.2464287308637 826.0882582015947) rotate(0 192.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ModelRunner.prepare_prefille/decode</text></g><g stroke-linecap="round"><g transform="translate(1115.8098695266167 730.2295706726181) rotate(0 -239.17415102480038 65.04102627931624)"><path d="M0.39 -1 C-57.54 4.78, -268.62 12.24, -348.48 34.09 C-428.33 55.94, -457.05 114.13, -478.74 130.08 M-0.86 1.08 C-58.92 7.1, -270.42 13.85, -349.67 35.52 C-428.92 57.18, -454.83 115.27, -476.35 131.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1115.8098695266167 730.2295706726181) rotate(0 -239.17415102480038 65.04102627931624)"><path d="M-466.62 108.06 C-470.62 112.56, -471.5 116.96, -476.35 131.09 M-466.62 108.06 C-469.08 112.76, -471.21 119.84, -476.35 131.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1115.8098695266167 730.2295706726181) rotate(0 -239.17415102480038 65.04102627931624)"><path d="M-454.09 119.71 C-460.89 121.6, -464.62 123.35, -476.35 131.09 M-454.09 119.71 C-459.61 121.4, -464.87 125.57, -476.35 131.09" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(474.134881872002 879.5614533568169) rotate(0 605.5 87.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cu_seqlens_q=[0,5,9] #seq token数量前缀和</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cu_seqlens_k=[0,5,13] #seq token数量前缀和,考虑了seqB前4个prefix cache token</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">slot_mapping=[0,1,2,3,4,5, 8,9,10,11] #每个token在GPU Block上以token粒度的绝对位置</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">计算方式为(token所属的block_id*block_size)+token在seq中的绝对位置</text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="142.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">input_ids=[1,2,3,4,5, 5,33,6,7] #seqB前4个token作为prefix cache前缀cache已在seqA block0中,所以不重复放入input_ids</text><text x="0" y="167.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">positions=[0,1,2,3,4, 4,5,6,7] #各个seq的token在seq中的绝对位置</text></g><g stroke-linecap="round" transform="translate(464.21734240709463 871.9106021634525) rotate(0 610.3617017186723 58.93934299847115)"><path d="M29.47 0 C333.49 0, 637.51 0, 1191.25 0 M29.47 0 C263.5 0, 497.52 0, 1191.25 0 M1191.25 0 C1210.9 0, 1220.72 9.82, 1220.72 29.47 M1191.25 0 C1210.9 0, 1220.72 9.82, 1220.72 29.47 M1220.72 29.47 C1220.72 49.48, 1220.72 69.49, 1220.72 88.41 M1220.72 29.47 C1220.72 43.46, 1220.72 57.44, 1220.72 88.41 M1220.72 88.41 C1220.72 108.06, 1210.9 117.88, 1191.25 117.88 M1220.72 88.41 C1220.72 108.06, 1210.9 117.88, 1191.25 117.88 M1191.25 117.88 C823.05 117.88, 454.85 117.88, 29.47 117.88 M1191.25 117.88 C739.13 117.88, 287.01 117.88, 29.47 117.88 M29.47 117.88 C9.82 117.88, 0 108.06, 0 88.41 M29.47 117.88 C9.82 117.88, 0 108.06, 0 88.41 M0 88.41 C0 72.55, 0 56.68, 0 29.47 M0 88.41 C0 69.69, 0 50.96, 0 29.47 M0 29.47 C0 9.82, 9.82 0, 29.47 0 M0 29.47 C0 9.82, 9.82 0, 29.47 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(340.3881673212935 917.34895615391) rotate(0 53.89997863769531 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Context</text></g><g stroke-linecap="round" transform="translate(1960.6193722661874 877.7322319677223) rotate(0 228.95644242713354 49.30496661708139)"><path d="M24.65 0 C118.03 0.19, 213.96 -0.97, 433.26 0 M24.65 0 C155.16 0.68, 285.22 0.18, 433.26 0 M433.26 0 C447.99 -1.11, 456.27 9.44, 457.91 24.65 M433.26 0 C450.6 -1.06, 459.14 10.45, 457.91 24.65 M457.91 24.65 C456.31 38.24, 458.07 50.46, 457.91 73.96 M457.91 24.65 C457.43 38.74, 457.97 55.26, 457.91 73.96 M457.91 73.96 C457.46 91.19, 451.07 97.88, 433.26 98.61 M457.91 73.96 C458.3 88.31, 448.82 98.11, 433.26 98.61 M433.26 98.61 C334.31 100.63, 233.08 99.83, 24.65 98.61 M433.26 98.61 C345.7 99.36, 258.15 98.92, 24.65 98.61 M24.65 98.61 C6.29 100.26, 1.68 91.66, 0 73.96 M24.65 98.61 C7.51 100.17, -0.88 92.12, 0 73.96 M0 73.96 C0.11 59.65, 0.74 50.22, 0 24.65 M0 73.96 C-1.17 62.21, 0.49 51.07, 0 24.65 M0 24.65 C-1.86 10.13, 8.4 -1.87, 24.65 0 M0 24.65 C-1.4 7.78, 7.28 -1.6, 24.65 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1981.6758970907817 892.0371985848037) rotate(0 207.89991760253906 35)"><text x="207.89991760253906" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">model =</text><text x="207.89991760253906" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Qwen3ForCausalLM(hf_config)</text></g><g stroke-linecap="round"><g transform="translate(1683.807315233456 1024.9260262393345) rotate(0 139.12535519365906 -69.61086200116125)"><path d="M-0.74 0.22 C20.87 -21.73, 83.54 -110.31, 130.17 -131.27 C176.79 -152.23, 254.17 -126.32, 278.99 -125.55 M1.07 -0.71 C23 -22.52, 86.08 -109.33, 132.37 -129.91 C178.65 -150.49, 254.8 -124.82, 278.78 -124.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1683.807315233456 1024.9260262393345) rotate(0 139.12535519365906 -69.61086200116125)"><path d="M254.22 -119.48 C263 -122.56, 270.51 -120.8, 278.78 -124.17 M254.22 -119.48 C260.92 -121.29, 268.54 -121.57, 278.78 -124.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1683.807315233456 1024.9260262393345) rotate(0 139.12535519365906 -69.61086200116125)"><path d="M256.95 -136.36 C264.85 -133.66, 271.42 -126.11, 278.78 -124.17 M256.95 -136.36 C262.96 -132.97, 269.75 -128.04, 278.78 -124.17" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2071.1999323903296 1139.2527791274842) rotate(0 309 37.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">模型预测出各个Seqence的next token, 返回token_ids:list[int]</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A next token=f, token_id=6</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B next token=h, token_id=8</text></g><g stroke-linecap="round"><g transform="translate(2416.265222948063 914.0025303704642) rotate(0 93.37476552452893 106.83654118709939)"><path d="M1.05 0.11 C31.15 10.98, 154.97 29.3, 179.67 64.88 C204.36 100.46, 154.29 188.57, 149.22 213.58 M0.14 -0.88 C30.27 10.14, 154.07 30, 179.31 65.91 C204.55 101.81, 156.63 190.07, 151.58 214.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2416.265222948063 914.0025303704642) rotate(0 93.37476552452893 106.83654118709939)"><path d="M151.48 189.55 C151.62 196.91, 149.83 198.8, 151.58 214.55 M151.48 189.55 C151.7 195.2, 151.86 202.74, 151.58 214.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2416.265222948063 914.0025303704642) rotate(0 93.37476552452893 106.83654118709939)"><path d="M167.58 195.34 C164.2 201.57, 158.89 202.19, 151.58 214.55 M167.58 195.34 C163.9 199.67, 160.14 205.8, 151.58 214.55" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2499.6432754581797 1209.3435299512712) rotate(0 -182.65093356325963 49.86497849186998)"><path d="M1.13 -0.97 C6.5 14.38, 104.44 75.98, 33.28 92.26 C-37.89 108.54, -349.59 96.18, -425.87 96.71 M0.27 1.13 C5.91 16.62, 106.08 77.84, 35.45 93.44 C-35.17 109.05, -346.93 94.28, -423.49 94.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2499.6432754581797 1209.3435299512712) rotate(0 -182.65093356325963 49.86497849186998)"><path d="M-399.83 86.68 C-410.61 88.32, -419.26 91.51, -423.49 94.75 M-399.83 86.68 C-407.8 90.46, -417.44 91.7, -423.49 94.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2499.6432754581797 1209.3435299512712) rotate(0 -182.65093356325963 49.86497849186998)"><path d="M-400.18 103.78 C-410.84 98.8, -419.36 95.36, -423.49 94.75 M-400.18 103.78 C-408.1 101.38, -417.6 96.45, -423.49 94.75" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1722.627767654501 834.7901227084585) rotate(0 149 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">input_ids和positions作为输入</text></g><g transform="translate(2480.967702919386 973.8936325906925) rotate(0 40 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">模型输出</text></g><g stroke-linecap="round" transform="translate(265.46499553653973 797.5252037028149) rotate(0 1216.1594688934551 141.68098825322932)"><path d="M32 0 C548.05 0, 1064.1 0, 2400.32 0 M32 0 C577.27 0, 1122.54 0, 2400.32 0 M2400.32 0 C2421.65 0, 2432.32 10.67, 2432.32 32 M2400.32 0 C2421.65 0, 2432.32 10.67, 2432.32 32 M2432.32 32 C2432.32 112.89, 2432.32 193.77, 2432.32 251.36 M2432.32 32 C2432.32 96.74, 2432.32 161.49, 2432.32 251.36 M2432.32 251.36 C2432.32 272.7, 2421.65 283.36, 2400.32 283.36 M2432.32 251.36 C2432.32 272.7, 2421.65 283.36, 2400.32 283.36 M2400.32 283.36 C1490.51 283.36, 580.69 283.36, 32 283.36 M2400.32 283.36 C1573.45 283.36, 746.57 283.36, 32 283.36 M32 283.36 C10.67 283.36, 0 272.7, 0 251.36 M32 283.36 C10.67 283.36, 0 272.7, 0 251.36 M0 251.36 C0 183.5, 0 115.64, 0 32 M0 251.36 C0 205.11, 0 158.85, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(282.25915605948 812.7984554114555) rotate(0 168.29989624023438 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ModelRunner.Run()</text></g><g stroke-linecap="round" transform="translate(1978.1753983984122 1181.639526750816) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C27.73 2.13, 38.07 -3.47, 46.75 0 C58.76 2.95, 65.1 4.96, 62.34 15.58 C64.21 28, 64.33 32.49, 62.34 53.56 C60.34 67.05, 60.37 65.66, 46.75 69.14 C33 65.27, 27.16 69.14, 15.58 69.14 C8.21 72.61, -1.26 62.65, 0 53.56 C-0.75 40.73, -2.37 26.91, 0 15.58 C-2.11 6.08, 3.83 -1.13, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C25.21 -0.25, 36.37 1.71, 46.75 0 M15.58 0 C25.2 -0.48, 35.64 -0.79, 46.75 0 M46.75 0 C57.78 1.74, 61.89 5.99, 62.34 15.58 M46.75 0 C58.73 -0.84, 62.73 3.12, 62.34 15.58 M62.34 15.58 C62.16 27.1, 64.04 35.92, 62.34 53.56 M62.34 15.58 C62.41 26.15, 61.87 36.53, 62.34 53.56 M62.34 53.56 C61.24 63.01, 55.22 70.8, 46.75 69.14 M62.34 53.56 C64.28 65.41, 56.43 70.7, 46.75 69.14 M46.75 69.14 C39.59 69.19, 30.8 67.3, 15.58 69.14 M46.75 69.14 C36.5 68.45, 24.12 68.64, 15.58 69.14 M15.58 69.14 C6.8 69.2, -1.86 65.86, 0 53.56 M15.58 69.14 C5.41 66.99, -1.4 63.51, 0 53.56 M0 53.56 C-1.52 43.74, 0.29 34.82, 0 15.58 M0 53.56 C-0.58 40.07, 0.45 23.62, 0 15.58 M0 15.58 C0.53 6.78, 4.49 -0.23, 15.58 0 M0 15.58 C-0.54 4.11, 7.01 1.01, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2568.628876881854 1250.023373612632) rotate(0 64 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">更新Seqences</text></g><g stroke-linecap="round" transform="translate(1977.229161642037 1258.8031618242658) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C28.43 3.49, 40.79 0.29, 46.75 0 C54.93 -0.99, 59.55 7.25, 62.34 15.58 C60.76 33.64, 65.98 41.99, 62.34 53.56 C64.8 62.28, 54.14 66.87, 46.75 69.14 C43.37 72.69, 32.68 67.92, 15.58 69.14 C7.73 67.21, -0.46 62.83, 0 53.56 C-1.59 41.75, -0.84 27.03, 0 15.58 C0.32 1.62, 3.69 2.59, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C24.78 1.46, 32.99 -1.29, 46.75 0 M15.58 0 C23.78 1.11, 31.11 0.64, 46.75 0 M46.75 0 C58.52 -0.73, 62.68 3.39, 62.34 15.58 M46.75 0 C56.27 -0.5, 61.06 5.08, 62.34 15.58 M62.34 15.58 C62.11 28.96, 60.96 44.84, 62.34 53.56 M62.34 15.58 C61.68 27.47, 61.27 41.12, 62.34 53.56 M62.34 53.56 C64.02 65.22, 56.53 70.5, 46.75 69.14 M62.34 53.56 C61.45 65.67, 56.13 70.27, 46.75 69.14 M46.75 69.14 C38.1 70.35, 26.12 70.14, 15.58 69.14 M46.75 69.14 C39.69 69.08, 30.09 70.01, 15.58 69.14 M15.58 69.14 C5.38 67.27, -1.22 63.56, 0 53.56 M15.58 69.14 C4.25 67.54, -1.99 61.9, 0 53.56 M0 53.56 C1.62 43.56, 0.16 30.06, 0 15.58 M0 53.56 C-0.01 39.23, -0.62 23.21, 0 15.58 M0 15.58 C-0.47 4.25, 6.78 0.87, 15.58 0 M0 15.58 C2.11 4.24, 5.35 -0.04, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1813.7409301550183 1171.0702039411099) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g transform="translate(1820.3437502344764 1318.9710766323224) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g transform="translate(1716.1572820318393 1200.0792814078104) rotate(0 126.5 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcdef"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,6]</text></g><g transform="translate(1643.0783181333563 1259.1185746111878) rotate(0 165 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde fgh"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,33,6,7,8]</text></g><g transform="translate(1661.6025901240941 1367.411846736868) rotate(0 322 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">注意此时Seqence的block_table并没有更新</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">其会在scheduler.scheduler()时在blockManager.allocate()中更新</text></g><g stroke-linecap="round"><g transform="translate(1631.3225330944715 1302.213798435645) rotate(0 -41.710346948820074 -0.16213239000546764)"><path d="M0.82 -0.44 C-13.03 -0.45, -69.26 0.14, -83.4 0.42 M-0.2 -1.72 C-14.17 -1.66, -70.1 0.7, -84.25 1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1631.3225330944715 1302.213798435645) rotate(0 -41.710346948820074 -0.16213239000546764)"><path d="M-61.16 -8.19 C-68.25 -5.04, -75.73 -3.48, -84.25 1.39 M-61.16 -8.19 C-66.85 -4.64, -73.84 -3.15, -84.25 1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1631.3225330944715 1302.213798435645) rotate(0 -41.710346948820074 -0.16213239000546764)"><path d="M-60.4 8.89 C-67.77 7.31, -75.46 4.13, -84.25 1.39 M-60.4 8.89 C-66.21 7.68, -73.41 4.42, -84.25 1.39" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(964.7153262953468 1228.1597596803404) rotate(0 285.99999999999994 62.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">检查Sequence是否已经完成，判断条件为：</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1.Sequence的最后一个token为终止符且模型不忽略终止符</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2.或者已经达到了一条Sequence生成的最大token限制：</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">if (not seq.ignore_eos and token_id == self.eos) or </text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seq.num_completion_tokens == seq.max_tokens</text></g><g stroke-linecap="round"><g transform="translate(932.1598538205155 1298.4364606780182) rotate(0 -47.21010474835214 0.5594536839432749)"><path d="M-0.46 -0.26 C-16.48 0.1, -80.28 0.65, -95.92 1.05 M1.5 -1.44 C-14.14 -0.79, -77.55 2.25, -93.56 2.56" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(932.1598538205155 1298.4364606780182) rotate(0 -47.21010474835214 0.5594536839432749)"><path d="M-70.39 -6.82 C-78.25 -5.04, -85.26 0.61, -93.56 2.56 M-70.39 -6.82 C-79.88 -4.1, -88.15 0.67, -93.56 2.56" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(932.1598538205155 1298.4364606780182) rotate(0 -47.21010474835214 0.5594536839432749)"><path d="M-69.78 10.27 C-77.68 6.63, -84.88 6.86, -93.56 2.56 M-69.78 10.27 C-79.55 6.34, -88.05 4.46, -93.56 2.56" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(308.90096808783744 1257.265693483956) rotate(0 258.5 37.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">若Sequence已经完成则将Sequence状态设置为FINISHED</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">释放掉Sequence占用的资源(即BlockManager中的block)</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">同时将Sequence移出scheduler.running deque</text></g><g stroke-linecap="round" transform="translate(269.2493557946667 1092.5806132655325) rotate(0 1216.8811674734234 167.04876882303734)"><path d="M32 0 C611.58 0, 1191.15 0, 2401.76 0 M32 0 C538.91 0, 1045.82 0, 2401.76 0 M2401.76 0 C2423.1 0, 2433.76 10.67, 2433.76 32 M2401.76 0 C2423.1 0, 2433.76 10.67, 2433.76 32 M2433.76 32 C2433.76 101.06, 2433.76 170.11, 2433.76 302.1 M2433.76 32 C2433.76 94.76, 2433.76 157.51, 2433.76 302.1 M2433.76 302.1 C2433.76 323.43, 2423.1 334.1, 2401.76 334.1 M2433.76 302.1 C2433.76 323.43, 2423.1 334.1, 2401.76 334.1 M2401.76 334.1 C1895.47 334.1, 1389.17 334.1, 32 334.1 M2401.76 334.1 C1671.2 334.1, 940.63 334.1, 32 334.1 M32 334.1 C10.67 334.1, 0 323.43, 0 302.1 M32 334.1 C10.67 334.1, 0 323.43, 0 302.1 M0 302.1 C0 219.22, 0 136.34, 0 32 M0 302.1 C0 200.39, 0 98.68, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(287.14607413454166 1113.6585003935415) rotate(0 227.69985961914062 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Scheduler.postprocess()</text></g><g stroke-linecap="round" transform="translate(10 275.83581680698626) rotate(0 1362.3144219013236 588.5988404602847)"><path d="M32 0 C889.08 0, 1746.15 0, 2692.63 0 M32 0 C914.65 0, 1797.3 0, 2692.63 0 M2692.63 0 C2713.96 0, 2724.63 10.67, 2724.63 32 M2692.63 0 C2713.96 0, 2724.63 10.67, 2724.63 32 M2724.63 32 C2724.63 271.49, 2724.63 510.97, 2724.63 1145.2 M2724.63 32 C2724.63 333.47, 2724.63 634.94, 2724.63 1145.2 M2724.63 1145.2 C2724.63 1166.53, 2713.96 1177.2, 2692.63 1177.2 M2724.63 1145.2 C2724.63 1166.53, 2713.96 1177.2, 2692.63 1177.2 M2692.63 1177.2 C1769.66 1177.2, 846.69 1177.2, 32 1177.2 M2692.63 1177.2 C2158.93 1177.2, 1625.23 1177.2, 32 1177.2 M32 1177.2 C10.67 1177.2, 0 1166.53, 0 1145.2 M32 1177.2 C10.67 1177.2, 0 1166.53, 0 1145.2 M0 1145.2 C0 917.22, 0 689.24, 0 32 M0 1145.2 C0 897.49, 0 649.79, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(19.801522006861433 311.23460580502615) rotate(0 125.09994506835938 157.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LLMEngine</text><text x="0" y="76.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">.step()</text><text x="0" y="121.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">不断调用</text><text x="0" y="166.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">直到scheduler</text><text x="0" y="211.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">waitingdeuqe</text><text x="0" y="256.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">runningdeque</text><text x="0" y="301.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">均为空</text></g><g stroke-linecap="round"><g transform="translate(270.56987951075723 1268.2129877421648) rotate(0 -55.640943556149324 -315.7129198576468)"><path d="M-0.34 0.38 C-19.21 -61.39, -110.25 -265.25, -112.91 -370.31 C-115.56 -475.37, -32.73 -586.67, -16.26 -629.99 M1.69 -0.46 C-16.81 -62.11, -107.93 -263.85, -110.54 -369.07 C-113.15 -474.29, -30.18 -587.92, -13.97 -631.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(270.56987951075723 1268.2129877421648) rotate(0 -55.640943556149324 -315.7129198576468)"><path d="M-16.97 -606.99 C-15.42 -616.16, -16.01 -625.06, -13.97 -631.81 M-16.97 -606.99 C-16.34 -615.83, -15.27 -625.25, -13.97 -631.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(270.56987951075723 1268.2129877421648) rotate(0 -55.640943556149324 -315.7129198576468)"><path d="M-32.22 -614.72 C-25.69 -621.33, -21.32 -627.72, -13.97 -631.81 M-32.22 -614.72 C-25.69 -620.7, -18.78 -627.17, -13.97 -631.81" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>