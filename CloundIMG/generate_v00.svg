<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2894.82884817029 4911.266390823549" width="8684.48654451087" height="14733.799172470648"><!-- svg-source:excalidraw --><metadata></metadata><defs><symbol id="image-036cdfab6d2cce4cf07dcff852d64bcaf01bc84f"><image href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iODc0IiBoZWlnaHQ9IjM5IiB4bWw6c3BhY2U9InByZXNlcnZlIiBvdmVyZmxvdz0iaGlkZGVuIiB2aWV3Qm94PSIwIDAgODc0IDM5Ij48ZGVmcz48Y2xpcFBhdGggaWQ9ImNsaXAwIj48cmVjdCB4PSIxOCIgeT0iMjkiIHdpZHRoPSI4NzQiIGhlaWdodD0iMzkiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjY2xpcDApIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTggLTI5KSIvPjwvc3ZnPg==" preserveAspectRatio="none" width="100%" height="100%"></image></symbol><style class="style-fonts">
      @font-face { font-family: Comic Shanns; src: url(data:font/woff2;base64,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); }</style></defs><rect x="0" y="0" width="2894.82884817029" height="4911.266390823549" fill="#ffffff"></rect><g transform="translate(10 4747.930199768808) rotate(0 437 19.5)"><use href="#image-036cdfab6d2cce4cf07dcff852d64bcaf01bc84f" width="874" height="39" opacity="1"></use></g><g transform="translate(10 4862.266390823549) rotate(0 437 19.5)"><use href="#image-036cdfab6d2cce4cf07dcff852d64bcaf01bc84f" width="874" height="39" opacity="1"></use></g><g transform="translate(866.9632702976594 27.610706560815743) rotate(0 115.49995422363281 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Prompt: "hello"</text></g><g stroke-linecap="round"><g transform="translate(969.550318044151 73.61070656081574) rotate(0 -0.5242913404982801 15.795918558207632)"><path d="M0 0 C0.22 6.65, -1.46 15.77, -0.98 31.59 M0 0 C-0.8 7.26, -0.19 14.61, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(969.550318044151 73.61070656081574) rotate(0 -0.5242913404982801 15.795918558207632)"><path d="M-5.91 16.58 C-4.39 19.48, -4.36 24.34, -0.98 31.59 M-5.91 16.58 C-5.18 20.03, -3.39 23.54, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(969.550318044151 73.61070656081574) rotate(0 -0.5242913404982801 15.795918558207632)"><path d="M4.89 16.92 C3.86 19.74, 1.33 24.52, -0.98 31.59 M4.89 16.92 C3.13 20.27, 2.43 23.7, -0.98 31.59" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(834.2534301468138 127.0707668002251) rotate(0 229.69393722112386 16.839738141954513)"><text x="0" y="23.575633398736326" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="26.94358102712723px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt_token_ids:[8,5,12,12,15]</text></g><g transform="translate(1021.3954610184664 75.39841473653723) rotate(0 99 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">tokenizer.encode()</text></g><g stroke-linecap="round" transform="translate(811.7076848789002 116.202543677231) rotate(0 243.0919752714541 27.197330945808517)"><path d="M13.6 0 C189.26 0.93, 365.82 2.49, 472.59 0 M13.6 0 C152.61 -0.17, 291.91 -0.09, 472.59 0 M472.59 0 C481.97 -0.54, 484.48 6.23, 486.18 13.6 M472.59 0 C480.42 1.93, 486.63 4.56, 486.18 13.6 M486.18 13.6 C484.61 20.62, 486.74 25.7, 486.18 40.8 M486.18 13.6 C485.79 19.58, 485.18 25.62, 486.18 40.8 M486.18 40.8 C487.11 51.82, 480.67 54.33, 472.59 54.39 M486.18 40.8 C488.31 50.5, 482.63 52.12, 472.59 54.39 M472.59 54.39 C305.68 53.68, 138.62 53.75, 13.6 54.39 M472.59 54.39 C314.05 56.38, 156.65 56.62, 13.6 54.39 M13.6 54.39 C3.21 54.96, 1.93 49.23, 0 40.8 M13.6 54.39 C6.25 52.65, -2.29 50.74, 0 40.8 M0 40.8 C0.29 33.73, 1.93 24.88, 0 13.6 M0 40.8 C-0.01 32.69, -0.15 21.62, 0 13.6 M0 13.6 C1.26 3.88, 6.32 -0.94, 13.6 0 M0 13.6 C1.18 5.94, 3.08 -1.82, 13.6 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1313.198456861176 129.9910058205096) rotate(0 44 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence</text></g><g transform="translate(959.0559126622584 202.34454562134852) rotate(0 82.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.add()</text></g><g stroke-linecap="round" transform="translate(973.3753762948509 300.3497290469568) rotate(0 199.48685740311066 34.570152486267034)"><path d="M17.29 0 C98.72 3.38, 182.92 2.85, 381.69 0 C395.14 0.84, 399.47 9.19, 398.97 17.29 C400.92 26.5, 395.36 30.49, 398.97 51.86 C395.55 64.31, 392.95 66.33, 381.69 69.14 C270.62 65.55, 163.28 65.42, 17.29 69.14 C4.61 67.36, 2.62 61.51, 0 51.86 C1.15 47.03, -2.2 35.04, 0 17.29 C-0.05 7.99, 2.61 0.82, 17.29 0" stroke="none" stroke-width="0" fill="#a5d8ff"></path><path d="M17.29 0 C155.29 0.98, 292.73 1.17, 381.69 0 M17.29 0 C113.39 1.15, 210.23 1.14, 381.69 0 M381.69 0 C393.6 0.03, 397.85 5.64, 398.97 17.29 M381.69 0 C393.25 -1.79, 399.43 6.42, 398.97 17.29 M398.97 17.29 C399.17 25.41, 398.91 32.57, 398.97 51.86 M398.97 17.29 C398.64 28.58, 400.06 40.22, 398.97 51.86 M398.97 51.86 C399.83 61.4, 394.49 67.39, 381.69 69.14 M398.97 51.86 C398.59 63.84, 392.35 69.7, 381.69 69.14 M381.69 69.14 C284.65 66.97, 184.87 68.91, 17.29 69.14 M381.69 69.14 C263.07 69.59, 143.71 69.31, 17.29 69.14 M17.29 69.14 C3.77 69.91, -0.26 63.34, 0 51.86 M17.29 69.14 C3.49 69.46, 0.84 65.59, 0 51.86 M0 51.86 C1.37 42.03, 1.85 31.91, 0 17.29 M0 51.86 C0.67 44.44, 0.29 38.59, 0 17.29 M0 17.29 C-1.26 4.18, 3.9 -0.73, 17.29 0 M0 17.29 C-0.78 3.55, 4.3 -1.92, 17.29 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(975.6422375168181 300.3497722845641) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C21.18 -1.22, 30.66 0.91, 46.75 0 C57.64 3.43, 59.77 2.64, 62.34 15.58 C59.62 23.63, 59.37 37.81, 62.34 53.56 C62.07 61.13, 57.18 69.32, 46.75 69.14 C41.88 69.35, 32.7 67.42, 15.58 69.14 C7.81 67.27, -3.37 60.55, 0 53.56 C-2.89 40.24, -0.16 34.23, 0 15.58 C-3.15 6.02, 1.69 -2.49, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C21.77 -0.45, 29.37 0.46, 46.75 0 M15.58 0 C23.56 0.57, 32.8 -0.25, 46.75 0 M46.75 0 C56.02 -0.12, 62.37 3.64, 62.34 15.58 M46.75 0 C57.6 0.66, 61.01 3.26, 62.34 15.58 M62.34 15.58 C62.65 21.74, 62.99 31.76, 62.34 53.56 M62.34 15.58 C63.08 30.98, 62.58 44.83, 62.34 53.56 M62.34 53.56 C63.62 62.19, 56.81 69.54, 46.75 69.14 M62.34 53.56 C61.47 64.5, 56.45 70.16, 46.75 69.14 M46.75 69.14 C38.39 70.2, 31.51 67.54, 15.58 69.14 M46.75 69.14 C37.27 68.28, 25.29 69.42, 15.58 69.14 M15.58 69.14 C4.93 69.11, -1.98 64.23, 0 53.56 M15.58 69.14 C6.04 71.35, -0.36 64.74, 0 53.56 M0 53.56 C1.69 41.7, -2.27 31.66, 0 15.58 M0 53.56 C0.17 44.02, -0.97 32.47, 0 15.58 M0 15.58 C-1.86 4.46, 4.52 -1.92, 15.58 0 M0 15.58 C-1.46 3.28, 3.54 -1.98, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1038.548674128943 300.91650920885877) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C26.48 1.04, 34 3.63, 46.75 0 C54.57 -2.55, 61.63 7.59, 62.34 15.58 C58.31 29.3, 61.47 38.34, 62.34 53.56 C62.38 64.12, 53.8 66.96, 46.75 69.14 C35.94 67.39, 30.05 67.29, 15.58 69.14 C1.82 65.75, -0.58 64.51, 0 53.56 C0.48 41.95, -2.63 26.73, 0 15.58 C-3.5 2.7, 3.4 1.4, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C22.83 0.41, 30.93 -1.61, 46.75 0 M15.58 0 C27.77 -0.25, 39 -0.32, 46.75 0 M46.75 0 C57.17 -1.55, 62.74 5.77, 62.34 15.58 M46.75 0 C55.82 -1.94, 60.06 5.75, 62.34 15.58 M62.34 15.58 C62.94 27.42, 64.34 36.43, 62.34 53.56 M62.34 15.58 C63.12 25.87, 63.33 37.26, 62.34 53.56 M62.34 53.56 C62.01 64.35, 56.39 69.63, 46.75 69.14 M62.34 53.56 C61.64 64.97, 56.07 71.39, 46.75 69.14 M46.75 69.14 C40.7 68.03, 34.12 71.28, 15.58 69.14 M46.75 69.14 C37.39 69.29, 29.89 68.89, 15.58 69.14 M15.58 69.14 C3.22 69.42, 0.73 65.87, 0 53.56 M15.58 69.14 C4.84 69.93, 0.11 65.66, 0 53.56 M0 53.56 C-2.36 43.42, -1.03 32.53, 0 15.58 M0 53.56 C-0.82 43.15, -1.13 33.97, 0 15.58 M0 15.58 C-0.67 3.27, 3.93 -1.67, 15.58 0 M0 15.58 C-1.65 3.22, 3.15 -1.73, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1102.0215666209217 302.0499830574481) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C24.31 3.29, 29.48 -2.68, 46.75 0 C56.44 2.39, 63.66 2.02, 62.34 15.58 C61.42 21.43, 61.73 33.06, 62.34 53.56 C58.99 61.76, 57.5 70.71, 46.75 69.14 C39.89 66.99, 24.42 65.47, 15.58 69.14 C4.61 69.7, 2.31 61.16, 0 53.56 C-3.14 45.67, -3.49 33.65, 0 15.58 C-1.8 6.6, 6.91 0.49, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C23.47 -1.75, 34.12 -1.12, 46.75 0 M15.58 0 C26.98 -0.06, 39.53 -0.78, 46.75 0 M46.75 0 C57.54 0.58, 61.19 3.51, 62.34 15.58 M46.75 0 C54.86 0.56, 62.05 5.45, 62.34 15.58 M62.34 15.58 C64.41 23.2, 62.38 34.64, 62.34 53.56 M62.34 15.58 C63.14 27.16, 62.34 40.68, 62.34 53.56 M62.34 53.56 C61.59 64.43, 56.54 70.03, 46.75 69.14 M62.34 53.56 C61.26 66.19, 55.11 68.6, 46.75 69.14 M46.75 69.14 C35.9 70.86, 23.27 70.43, 15.58 69.14 M46.75 69.14 C39.64 69.24, 31.79 69.4, 15.58 69.14 M15.58 69.14 C5.93 71.07, -0.31 64.63, 0 53.56 M15.58 69.14 C5.31 70.86, 0.01 66.21, 0 53.56 M0 53.56 C-0.28 44.48, -0.56 32.85, 0 15.58 M0 53.56 C-0.69 39.47, -0.1 25.15, 0 15.58 M0 15.58 C-1.27 3.53, 3.76 -1.72, 15.58 0 M0 15.58 C-2.05 3.47, 4.91 -0.62, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1165.4947185385388 303.18341366843015) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C23.09 -3.09, 35.04 1.86, 46.75 0 C58.46 -3.18, 59.74 1.77, 62.34 15.58 C62.33 28.13, 58.94 38.15, 62.34 53.56 C62.7 65.52, 57.3 67.99, 46.75 69.14 C35.57 65.46, 30.55 69.41, 15.58 69.14 C7.5 66.36, -2.54 63.9, 0 53.56 C-2.9 37.33, -1.2 27.48, 0 15.58 C1.72 5.69, 4.29 -3.14, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C27.13 -0.81, 36.96 0.66, 46.75 0 M15.58 0 C24.99 -0.76, 34.57 0.31, 46.75 0 M46.75 0 C55.99 -1.68, 60.35 5.68, 62.34 15.58 M46.75 0 C56.85 0.26, 60.65 5.83, 62.34 15.58 M62.34 15.58 C62.65 30.59, 63.27 42.73, 62.34 53.56 M62.34 15.58 C62.42 23.42, 62.21 31.1, 62.34 53.56 M62.34 53.56 C61.73 64.84, 56.21 71.09, 46.75 69.14 M62.34 53.56 C60.31 63.4, 58.68 69.77, 46.75 69.14 M46.75 69.14 C38.83 70.94, 30.65 67.45, 15.58 69.14 M46.75 69.14 C35.22 69.28, 26.03 70.1, 15.58 69.14 M15.58 69.14 C4.88 69.83, 0.1 65.44, 0 53.56 M15.58 69.14 C5.2 71.41, -0.32 61.66, 0 53.56 M0 53.56 C-0.81 40.79, 1.35 24.72, 0 15.58 M0 53.56 C0.02 44.22, -0.28 35.96, 0 15.58 M0 15.58 C-1.44 3.48, 3.41 -1.5, 15.58 0 M0 15.58 C-0.29 4.57, 4.37 1.23, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1228.9678704561554 302.04993981984444) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C27.2 2.79, 41.54 -2.78, 46.75 0 C54.55 -3.43, 63.27 4.93, 62.34 15.58 C59 21.83, 62.71 34.01, 62.34 53.56 C62.49 62.79, 55.37 71.76, 46.75 69.14 C38.44 69.17, 33.6 65.83, 15.58 69.14 C2.65 69.09, 2.22 60.79, 0 53.56 C-1.14 42.7, 2.38 29.53, 0 15.58 C-0.91 2.06, 4.02 2.29, 15.58 0" stroke="none" stroke-width="0" fill="#b2f2bb"></path><path d="M15.58 0 C23.96 0.56, 29 -0.96, 46.75 0 M15.58 0 C24.95 0.53, 33.33 -0.6, 46.75 0 M46.75 0 C55.16 0.49, 62.09 5.42, 62.34 15.58 M46.75 0 C55.45 0.64, 63.4 7.45, 62.34 15.58 M62.34 15.58 C62.89 25.97, 60.35 35.93, 62.34 53.56 M62.34 15.58 C61.9 23.89, 61.97 32.15, 62.34 53.56 M62.34 53.56 C61.4 65.9, 55.38 68.67, 46.75 69.14 M62.34 53.56 C63.87 64.57, 55.63 69.79, 46.75 69.14 M46.75 69.14 C32.88 67.39, 22.81 69.11, 15.58 69.14 M46.75 69.14 C37.82 70.15, 28 69.53, 15.58 69.14 M15.58 69.14 C5.29 70.63, 0.01 65.92, 0 53.56 M15.58 69.14 C4.88 66.86, 1.45 63.19, 0 53.56 M0 53.56 C1.41 37.52, -1.41 22.14, 0 15.58 M0 53.56 C-0.51 42.72, -0.59 32.69, 0 15.58 M0 15.58 C-1.78 3.69, 4.94 -0.54, 15.58 0 M0 15.58 C-0.82 6.43, 5.73 0.32, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1379.2182351989204 308.2518908019192) rotate(0 103.4549560546875 26.13343061098294)"><text x="0" y="18.293401427688064" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20.90674448878636px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.waiting </text><text x="0" y="44.42683203867101" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20.90674448878636px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">deque</text></g><g transform="translate(432.1978588920439 307.4453893941227) rotate(0 207.89987182617188 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">scheduler.scheduler()</text></g><g transform="translate(1194.3975450194637 579.1779831094827) rotate(0 242 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Tuple[list[Sequence], bool]:seqs, is_prefill</text></g><g stroke-linecap="round"><g transform="translate(990.3770084100258 368.3566466461143) rotate(0 174.9627924022297 100.5323115799456)"><path d="M0.24 0.35 C56.23 10.91, 289.87 29.17, 335.94 62.46 C382.02 95.76, 286.39 177.2, 276.69 200.11 M-1.1 -0.52 C55.28 10.24, 291.61 29.79, 338.29 63.47 C384.97 97.15, 289.03 178.64, 278.96 201.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(990.3770084100258 368.3566466461143) rotate(0 174.9627924022297 100.5323115799456)"><path d="M286.61 177.78 C284.7 183.82, 280.13 190.17, 278.96 201.58 M286.61 177.78 C283.37 185.79, 282.08 194.21, 278.96 201.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(990.3770084100258 368.3566466461143) rotate(0 174.9627924022297 100.5323115799456)"><path d="M300.12 188.27 C294.21 191.17, 285.58 194.36, 278.96 201.58 M300.12 188.27 C292.51 192.89, 286.84 197.91, 278.96 201.58" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1380.8498206834468 385.9251021607979) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C24.88 -3.35, 31.64 0.35, 46.75 0 C58.72 0.15, 61.19 3.42, 62.34 15.58 C58.59 29.15, 62.54 46.2, 62.34 53.56 C59.56 61.4, 57.09 71.36, 46.75 69.14 C37.64 66.79, 34.92 70.31, 15.58 69.14 C5.69 68.23, -3.14 62.77, 0 53.56 C-3.88 37.77, 1.66 25.23, 0 15.58 C-2.32 2.78, 6.12 -1.82, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C23.87 -1.8, 36.01 -0.07, 46.75 0 M15.58 0 C25.75 0.89, 34.49 -0.12, 46.75 0 M46.75 0 C59 0.56, 63.19 3.22, 62.34 15.58 M46.75 0 C58.62 -2.02, 61.96 5.66, 62.34 15.58 M62.34 15.58 C63.32 24.61, 64.39 33.74, 62.34 53.56 M62.34 15.58 C61.93 26.36, 63.56 36.26, 62.34 53.56 M62.34 53.56 C63.84 62.43, 55.16 69.91, 46.75 69.14 M62.34 53.56 C62.04 63.91, 54.87 69.46, 46.75 69.14 M46.75 69.14 C36.95 69.19, 27.26 69.1, 15.58 69.14 M46.75 69.14 C34.96 68.5, 22.8 68.36, 15.58 69.14 M15.58 69.14 C6.22 70.37, -1.26 62.36, 0 53.56 M15.58 69.14 C3.05 68.3, -0.78 61.74, 0 53.56 M0 53.56 C-1.4 42.79, -1.18 35.33, 0 15.58 M0 53.56 C0.37 43.33, 1.09 32.12, 0 15.58 M0 15.58 C-1.42 4.8, 6.52 0.73, 15.58 0 M0 15.58 C-2.03 3.54, 3.01 0.59, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1439.1586345786302 533.4735689103036) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g stroke-linecap="round" transform="translate(1514.6217084891882 70.19457985235749) rotate(0 73.10735534858128 70.90032426115431)"><path d="M32 0 C50.59 0.01, 64.88 -1.93, 114.21 0 C138.17 -1.87, 142.84 7.28, 146.21 32 C143.65 51.53, 146.38 78.38, 146.21 109.8 C143.06 131.96, 132.05 139.31, 114.21 141.8 C94.15 141.6, 69.97 141.33, 32 141.8 C12.96 145.04, 1.47 127.87, 0 109.8 C-3.21 88.33, 0.04 69.86, 0 32 C0.79 11.16, 9.69 -2.63, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C48.73 -1.37, 65.57 1.03, 114.21 0 M32 0 C65.66 0.3, 97.89 -0.96, 114.21 0 M114.21 0 C136.83 -1.75, 145.88 11.07, 146.21 32 M114.21 0 C134.68 0.56, 145.52 11.69, 146.21 32 M146.21 32 C146.5 53.03, 147.52 70.08, 146.21 109.8 M146.21 32 C147.71 56.79, 145.97 83.48, 146.21 109.8 M146.21 109.8 C145.95 131.1, 133.57 142.08, 114.21 141.8 M146.21 109.8 C147.06 133.35, 135.19 142.59, 114.21 141.8 M114.21 141.8 C91.12 141.53, 62.1 143.07, 32 141.8 M114.21 141.8 C92.76 142.03, 69.66 140.62, 32 141.8 M32 141.8 C8.81 141.07, -0.67 129.21, 0 109.8 M32 141.8 C9.21 139.88, -1.65 129.16, 0 109.8 M0 109.8 C0.04 92.68, 1.66 77.45, 0 32 M0 109.8 C-1.45 85.2, -0.08 61.35, 0 32 M0 32 C-1.77 9.22, 8.76 0.52, 32 0 M0 32 C-0.17 8.87, 10.69 0.11, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1521.7290638377694 91.0949041135118) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g transform="translate(1446.047902634115 123.75004097344572) rotate(0 27.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Block</text></g><g stroke-linecap="round" transform="translate(1663.6698660009904 69.56804522172934) rotate(0 73.10735534858128 70.90032426115431)"><path d="M32 0 C49.23 -2.62, 72.62 1.33, 114.21 0 C137.86 -2.78, 143.67 10.62, 146.21 32 C141.49 57.66, 143.19 89.7, 146.21 109.8 C147.93 131.63, 134.64 138.66, 114.21 141.8 C93.71 139.87, 68.29 145.41, 32 141.8 C9.96 139.48, -2.41 132.06, 0 109.8 C-1.29 87.78, -1.79 70.45, 0 32 C2.31 9, 12.46 -1.69, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C60.41 2.25, 89.5 1.25, 114.21 0 M32 0 C48.37 0.92, 64.69 0.96, 114.21 0 M114.21 0 C134.94 0.89, 145.28 12.62, 146.21 32 M114.21 0 C133.52 -0.54, 147.75 11.29, 146.21 32 M146.21 32 C145.81 51.7, 144.92 66.42, 146.21 109.8 M146.21 32 C145.13 58.46, 146.48 85.6, 146.21 109.8 M146.21 109.8 C145.9 131.82, 135.65 143.29, 114.21 141.8 M146.21 109.8 C146.22 133.4, 135.23 139.52, 114.21 141.8 M114.21 141.8 C83.42 143.56, 55.73 141.27, 32 141.8 M114.21 141.8 C95.73 140.54, 77.29 140.67, 32 141.8 M32 141.8 C9.23 140.08, -1.78 129.63, 0 109.8 M32 141.8 C10.38 141.18, -0.82 132.37, 0 109.8 M0 109.8 C-1.54 83.22, -0.5 60.81, 0 32 M0 109.8 C-0.27 83.87, 0.61 56.64, 0 32 M0 32 C0.02 10.77, 8.81 -1.21, 32 0 M0 32 C0.23 11.67, 10.77 -0.74, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1670.7772213495716 90.46836948288365) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(1811.0180937843486 68.4346254201464) rotate(0 73.10735534858134 70.90032426115431)"><path d="M32 0 C51.23 -3.01, 63.3 -0.28, 114.21 0 C137.77 -3.15, 147.04 7.17, 146.21 32 C147.23 50.45, 144.61 64.78, 146.21 109.8 C145.04 133.42, 138.79 143.27, 114.21 141.8 C96.3 140.41, 77.4 143.66, 32 141.8 C8.84 142.59, 0.5 130.15, 0 109.8 C2.89 90.46, 2.37 72.78, 0 32 C-2.75 11.74, 11.15 1.39, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C62.3 0.93, 94.8 -0.68, 114.21 0 M32 0 C58.01 0.25, 84.15 0.78, 114.21 0 M114.21 0 C133.78 -0.47, 147.55 11.21, 146.21 32 M114.21 0 C134.03 0.65, 148.43 9.94, 146.21 32 M146.21 32 C146.39 60.9, 145.59 88.35, 146.21 109.8 M146.21 32 C146.34 56.78, 146.55 81.62, 146.21 109.8 M146.21 109.8 C146.22 133.11, 135.27 139.82, 114.21 141.8 M146.21 109.8 C147.67 130.38, 137.6 140.72, 114.21 141.8 M114.21 141.8 C83.75 139.42, 55.73 140.61, 32 141.8 M114.21 141.8 C96.73 140.26, 79.79 140.37, 32 141.8 M32 141.8 C10.42 141.26, -0.72 132.21, 0 109.8 M32 141.8 C11.21 142.12, 2.19 129.49, 0 109.8 M0 109.8 C0.89 90.21, -1.29 72.25, 0 32 M0 109.8 C0.07 84.5, -0.87 58.49, 0 32 M0 32 C0.2 11.54, 10.75 -0.64, 32 0 M0 32 C-1.14 12.34, 9.47 -2.15, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1818.1254491329298 89.33494968130071) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g transform="translate(1966.8670079124759 115.06628339373492) rotate(0 23.099990844726562 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">...</text></g><g stroke-linecap="round" transform="translate(2017.5891303129395 69.31455939864645) rotate(0 73.10735534858134 70.90032426115431)"><path d="M32 0 C57.37 -2.2, 78.61 -0.5, 114.21 0 C136.95 1.72, 146.71 9.76, 146.21 32 C149 50.03, 142.49 63.13, 146.21 109.8 C148.49 130.42, 133.23 139.39, 114.21 141.8 C87.94 141.15, 58.04 140.64, 32 141.8 C10.11 144.11, -1.67 132.93, 0 109.8 C1.55 91.5, -1.14 71.08, 0 32 C2.94 13.21, 9.25 -2.14, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C55.78 -0.3, 79.49 -0.63, 114.21 0 M32 0 C65.36 0.47, 96.73 0.48, 114.21 0 M114.21 0 C137.48 -0.63, 147.71 9.15, 146.21 32 M114.21 0 C133.26 0.88, 145.91 10.63, 146.21 32 M146.21 32 C148.25 47.34, 147.01 63.41, 146.21 109.8 M146.21 32 C146.08 60.16, 146.85 89.97, 146.21 109.8 M146.21 109.8 C148 130.19, 136.57 143.03, 114.21 141.8 M146.21 109.8 C144.77 129.31, 133.41 140.96, 114.21 141.8 M114.21 141.8 C90.65 139.84, 68.71 139.5, 32 141.8 M114.21 141.8 C95.36 142.11, 77.45 141.72, 32 141.8 M32 141.8 C12.57 140.37, -1.42 130.74, 0 109.8 M32 141.8 C12.19 142.64, -2.03 129.47, 0 109.8 M0 109.8 C-1.76 93.89, -0.1 76.07, 0 32 M0 109.8 C-0.03 90.86, -0.57 73.28, 0 32 M0 32 C-1.04 8.79, 8.78 -0.32, 32 0 M0 32 C0.36 12.14, 8.89 -1.63, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2024.6964856615207 90.21488365980076) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(2166.6372878247416 68.6880247680183) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C50.07 2.46, 65.83 -0.17, 114.21 0 C132.41 -1.18, 148.5 13.91, 146.21 32 C147.22 57.81, 142.62 82.62, 146.21 109.8 C147.14 129.31, 136.34 142.3, 114.21 141.8 C91.23 143.5, 67.69 142.98, 32 141.8 C8.97 139.05, 1.08 131.61, 0 109.8 C3.8 86.01, -0.55 54.99, 0 32 C-3.57 13.93, 10.88 2.94, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C56.12 -1.38, 75.87 1.72, 114.21 0 M32 0 C59.86 -0.55, 86.55 -0.99, 114.21 0 M114.21 0 C133.56 0.77, 145.95 10.63, 146.21 32 M114.21 0 C133.28 0.32, 147.06 12.88, 146.21 32 M146.21 32 C147.98 54.13, 148.45 75.98, 146.21 109.8 M146.21 32 C147.6 47.15, 147.22 63.86, 146.21 109.8 M146.21 109.8 C144.95 129.55, 133.69 141.07, 114.21 141.8 M146.21 109.8 C145.44 128.93, 134.09 139.88, 114.21 141.8 M114.21 141.8 C93.96 140.82, 76.17 140.35, 32 141.8 M114.21 141.8 C86.09 141.2, 55.36 141.72, 32 141.8 M32 141.8 C12 142.53, -1.77 129.69, 0 109.8 M32 141.8 C8.48 142.39, -0.17 129.34, 0 109.8 M0 109.8 C-1.25 86.58, 0.83 63.04, 0 32 M0 109.8 C-0.14 88.01, -0.56 67.94, 0 32 M0 32 C0.31 11.95, 9.12 -1.41, 32 0 M0 32 C-0.03 12.09, 8.65 0.53, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2173.744643173323 89.5883490291726) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(2313.9855156081 67.55460496643536) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C57.45 -0.81, 91.47 3.62, 114.21 0 C137.02 -3.27, 144.23 12.94, 146.21 32 C146.23 51.98, 146.1 76.11, 146.21 109.8 C145.24 128.51, 134.06 141.24, 114.21 141.8 C82.58 139.79, 55.4 143.02, 32 141.8 C12.05 139.59, 0.65 134.07, 0 109.8 C-3.02 84.22, 0.77 55.05, 0 32 C1.12 12.46, 9.02 3.09, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C49.95 -1.87, 67.38 1.38, 114.21 0 M32 0 C53.08 1.01, 76.02 0.61, 114.21 0 M114.21 0 C133.57 0.28, 146.95 12.59, 146.21 32 M114.21 0 C135.19 0.79, 146.33 12.38, 146.21 32 M146.21 32 C145 56.63, 146.33 80.51, 146.21 109.8 M146.21 32 C145.98 50.89, 145.68 71.01, 146.21 109.8 M146.21 109.8 C145.54 129.21, 134.28 140.13, 114.21 141.8 M146.21 109.8 C144.56 129.16, 133.5 140.08, 114.21 141.8 M114.21 141.8 C91.65 141.97, 67.22 143.41, 32 141.8 M114.21 141.8 C96.09 142.01, 75.75 140.92, 32 141.8 M32 141.8 C8.76 142.32, -0.15 129.57, 0 109.8 M32 141.8 C10.69 141.91, -2.14 129.74, 0 109.8 M0 109.8 C-0.98 84.7, 1.11 60.53, 0 32 M0 109.8 C0.89 94.39, -0.04 76.98, 0 32 M0 32 C-0.03 11.9, 8.91 0.46, 32 0 M0 32 C-2.24 9.08, 9.52 0.9, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2321.092870956681 88.45492922758967) rotate(0 66 50)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[]</text></g><g stroke-linecap="round" transform="translate(1429.6129425868253 61.127005251673836) rotate(0 521.3860367718842 76.50777689435017)"><path d="M32 0 C260.75 -3.18, 489.41 -4.57, 1010.77 0 M32 0 C362.7 0.12, 694.34 0.45, 1010.77 0 M1010.77 0 C1031.79 0.69, 1042.87 12.16, 1042.77 32 M1010.77 0 C1032.11 2.27, 1042.45 8.38, 1042.77 32 M1042.77 32 C1041.54 65.35, 1043.71 95.39, 1042.77 121.02 M1042.77 32 C1041.61 50.69, 1041.31 70.46, 1042.77 121.02 M1042.77 121.02 C1041.33 140.63, 1030.32 151.52, 1010.77 153.02 M1042.77 121.02 C1042.48 141.73, 1031.28 154.25, 1010.77 153.02 M1010.77 153.02 C693.66 156.17, 377.53 157.27, 32 153.02 M1010.77 153.02 C680.89 150.29, 351.74 149.88, 32 153.02 M32 153.02 C10.69 153.11, -1.86 141.14, 0 121.02 M32 153.02 C10.9 154.02, 0.1 141.61, 0 121.02 M0 121.02 C-2.52 96.83, -0.97 76.72, 0 32 M0 121.02 C0.67 89.22, -0.19 56.42, 0 32 M0 32 C-1.94 9.28, 9.67 0.78, 32 0 M0 32 C1.1 10.98, 10.09 -2.01, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2486.745485789795 27.34327396318622) rotate(0 146.29994201660156 35)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">CPU上的逻辑Block:</text><text x="0" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.blocks</text></g><g transform="translate(1531.7215442046338 10) rotate(0 400.39984130859375 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">len(BlockManager.blocks) = config.num_kvcache_blocks</text></g><g transform="translate(1781.827032698228 223.01205231559106) rotate(0 504.6998596191406 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">max(len(token_ids)) = config.block_size 即一个block管理的tokens数量</text></g><g transform="translate(2488.3674746278293 103.60514307125413) rotate(0 153.99993896484375 52.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">deque: free_block_id</text><text x="0" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">set: used_blocl_id</text><text x="0" y="94.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">管理blocks</text></g><g stroke-linecap="round" transform="translate(1379.2763807373178 461.2245413500714) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C26.23 -1.1, 33.26 -1.61, 46.75 0 C56.58 2.31, 60.67 6.99, 62.34 15.58 C62.3 26.58, 59.6 35.44, 62.34 53.56 C65.28 66.49, 55.73 67, 46.75 69.14 C43.43 70.3, 36.04 67.53, 15.58 69.14 C8.28 70.84, -3.19 65.72, 0 53.56 C-0.28 42.36, -3.7 27.97, 0 15.58 C2.75 6.6, 7.52 -0.01, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C23.78 -0.43, 28.82 -0.02, 46.75 0 M15.58 0 C27.12 -1.3, 39.57 -0.64, 46.75 0 M46.75 0 C58.93 -0.94, 63.36 6.42, 62.34 15.58 M46.75 0 C55.69 -1.82, 60.2 4.35, 62.34 15.58 M62.34 15.58 C60.31 24.26, 60.25 34.02, 62.34 53.56 M62.34 15.58 C61.93 24.66, 62.53 32.81, 62.34 53.56 M62.34 53.56 C64.24 62.52, 55.73 68.75, 46.75 69.14 M62.34 53.56 C63.87 64.79, 55.11 67.48, 46.75 69.14 M46.75 69.14 C38.81 69.14, 34.09 67.26, 15.58 69.14 M46.75 69.14 C39.34 68.96, 31.34 70, 15.58 69.14 M15.58 69.14 C4.15 67.27, -1.88 63.62, 0 53.56 M15.58 69.14 C5.55 70.62, -1.78 62.32, 0 53.56 M0 53.56 C0.22 40.27, -1.62 29.88, 0 15.58 M0 53.56 C-0.43 39.81, -0.51 28.45, 0 15.58 M0 15.58 C1.8 6.01, 3.38 -1.1, 15.58 0 M0 15.58 C1.45 4.74, 3.71 -1.54, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1450.2278628624576 396.711846342052) rotate(0 115.5 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5]</text></g><g transform="translate(1449.3196234002926 474.5693446225596) rotate(0 154 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde fg"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,33,6,7]</text></g><g stroke-linecap="round" transform="translate(1765.672575766459 328.0856595866826) rotate(0 58.76416173680815 103.66266073672205)"><path d="M29.38 0 C49.27 -0.28, 63.23 1.26, 88.15 0 M29.38 0 C45.59 0.89, 60.15 -0.52, 88.15 0 M88.15 0 C105.87 -0.73, 116.85 7.87, 117.53 29.38 M88.15 0 C106.28 -1.92, 115.87 7.82, 117.53 29.38 M117.53 29.38 C115.87 60, 117.49 92.51, 117.53 177.94 M117.53 29.38 C118.23 75.79, 119.61 122.96, 117.53 177.94 M117.53 177.94 C115.76 196.09, 105.83 207.84, 88.15 207.33 M117.53 177.94 C117.36 195.74, 107.76 207.44, 88.15 207.33 M88.15 207.33 C76.86 207.47, 63.18 206.4, 29.38 207.33 M88.15 207.33 C65.3 206.61, 44.5 207.42, 29.38 207.33 M29.38 207.33 C8.25 205.91, -0.03 198.77, 0 177.94 M29.38 207.33 C7.78 207.85, -2.24 195.94, 0 177.94 M0 177.94 C-0.31 140.3, -2.32 103.01, 0 29.38 M0 177.94 C-2.25 123.37, -0.71 69.71, 0 29.38 M0 29.38 C-1.29 8.45, 10.31 -1.01, 29.38 0 M0 29.38 C0.51 10.11, 9.17 -1.68, 29.38 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1778.236755813814 361.7483203234042) rotate(0 46.19998168945318 70)"><text x="46.199981689453125" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockM</text><text x="46.199981689453125" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">anager</text><text x="46.199981689453125" y="94.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">.alloc</text><text x="46.199981689453125" y="129.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ate()</text></g><g stroke-linecap="round"><g transform="translate(1692.2278628624574 401.47059959732724) rotate(0 31.37796592603388 1.5252553458931288)"><path d="M0.76 -0.39 C7.7 1.57, 31.12 11.65, 41.5 10.57 C51.89 9.48, 59.7 -3.69, 63.06 -6.88 M-0.3 -1.65 C6.59 0.57, 30.63 13.01, 41.12 11.81 C51.6 10.61, 59.21 -5.54, 62.62 -8.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1692.2278628624574 401.47059959732724) rotate(0 31.37796592603388 1.5252553458931288)"><path d="M58.58 5.04 C59.4 2.34, 60.35 -2.19, 62.62 -8.84 M58.58 5.04 C59.45 -0.2, 61.34 -5.65, 62.62 -8.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1692.2278628624574 401.47059959732724) rotate(0 31.37796592603388 1.5252553458931288)"><path d="M50.6 -0.8 C53.64 -1.88, 56.88 -4.73, 62.62 -8.84 M50.6 -0.8 C54.32 -3.87, 59.09 -7.21, 62.62 -8.84" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(1639.0481444429197 463.5693446225596) rotate(0 58.76940840168851 1.6041807241294919)"><path d="M1.07 -0.56 C16.15 -1.66, 72.25 -8.97, 91.21 -6.99 C110.18 -5.01, 110.99 8.17, 114.87 11.3 M0.17 1.76 C15.08 0.35, 71.06 -10.45, 90.59 -8.73 C110.12 -7, 113.44 8.55, 117.37 12.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1639.0481444429197 463.5693446225596) rotate(0 58.76940840168851 1.6041807241294919)"><path d="M104.47 2.63 C108.37 6.78, 114.79 8.4, 117.37 12.12 M104.47 2.63 C106.96 4, 109.57 6.2, 117.37 12.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1639.0481444429197 463.5693446225596) rotate(0 58.76940840168851 1.6041807241294919)"><path d="M113.59 -3.44 C114.16 3, 117.26 6.82, 117.37 12.12 M113.59 -3.44 C114.01 -0.76, 114.61 2.78, 117.37 12.12" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1893.1049782350105 327.4252591980712) rotate(0 232.41570026455224 22.5)"><path d="M11.25 0 C184.02 -1.75, 354.79 -2.05, 453.58 0 M11.25 0 C127.47 1.69, 243.96 1.68, 453.58 0 M453.58 0 C459.3 -1.5, 464.58 3.21, 464.83 11.25 M453.58 0 C460.26 1.23, 465.37 4.07, 464.83 11.25 M464.83 11.25 C464.28 21.47, 465.4 27.27, 464.83 33.75 M464.83 11.25 C464.54 15.6, 464.63 21.55, 464.83 33.75 M464.83 33.75 C462.97 40.04, 461.28 45.87, 453.58 45 M464.83 33.75 C464.93 40.51, 459.94 46.67, 453.58 45 M453.58 45 C343.73 43.09, 234.85 42.17, 11.25 45 M453.58 45 C351.72 46.47, 250.24 46.01, 11.25 45 M11.25 45 C2.75 45.78, 0.95 41.52, 0 33.75 M11.25 45 C3.17 42.99, -0.75 42.71, 0 33.75 M0 33.75 C-1.19 26.24, -0.49 14.9, 0 11.25 M0 33.75 C0.16 28.65, -0.33 22.54, 0 11.25 M0 11.25 C-0.83 3.44, 5.03 -0.93, 11.25 0 M0 11.25 C1.15 2.67, 1.99 0.69, 11.25 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1925.320757845266 332.4252591980712) rotate(0 200.19992065429688 17.5)"><text x="200.19992065429688" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.free_block_id</text></g><g stroke-linecap="round"><g transform="translate(1894.2008992400752 408.4482884410809) rotate(0 60.176132099087226 31.326460615953692)"><path d="M-1.12 -0.44 C7.45 -4.84, 30.65 -42.94, 50.66 -27.37 C70.68 -11.81, 107.61 72.9, 118.97 92.95 M0.5 -1.71 C8.94 -5.93, 29.34 -42.35, 49.5 -26.44 C69.66 -10.53, 109.94 73.75, 121.47 93.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1894.2008992400752 408.4482884410809) rotate(0 60.176132099087226 31.326460615953692)"><path d="M102.92 76.98 C106.45 80.45, 109.66 83.83, 121.47 93.74 M102.92 76.98 C105.93 80.02, 110.71 84.13, 121.47 93.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1894.2008992400752 408.4482884410809) rotate(0 60.176132099087226 31.326460615953692)"><path d="M118.03 68.98 C117.92 74.2, 117.54 79.48, 121.47 93.74 M118.03 68.98 C117.71 73.62, 119.22 79.47, 121.47 93.74" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round" transform="translate(1882.7234565210117 519.9735092455539) rotate(0 73.10735534858134 70.90032426115431)"><path d="M32 0 C56.69 1.68, 77.8 2.59, 114.21 0 C137.35 -1.65, 149.3 12.37, 146.21 32 C148.26 46.6, 146.88 67.32, 146.21 109.8 C142.77 132.8, 138.29 143.2, 114.21 141.8 C86.48 140.18, 54.85 139.14, 32 141.8 C13.77 138.23, 0.42 129.33, 0 109.8 C0.17 86.21, -2.55 58.56, 0 32 C-1.06 13.29, 11.65 0.57, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C47.09 -0.99, 64.36 -1.16, 114.21 0 M32 0 C49.47 0.35, 66.83 1.15, 114.21 0 M114.21 0 C136.02 0.27, 148.12 9.24, 146.21 32 M114.21 0 C133.92 -0.45, 147.74 11.51, 146.21 32 M146.21 32 C146.17 48.33, 144.09 64.97, 146.21 109.8 M146.21 32 C145.59 56.16, 145.53 79.13, 146.21 109.8 M146.21 109.8 C145.23 132.59, 134.51 139.93, 114.21 141.8 M146.21 109.8 C144.05 130.76, 135.91 143.28, 114.21 141.8 M114.21 141.8 C97.14 140.04, 78.05 139.84, 32 141.8 M114.21 141.8 C95.71 142.26, 76.01 141.25, 32 141.8 M32 141.8 C10.01 143.07, 1.8 131.95, 0 109.8 M32 141.8 C8.58 140.54, 1.45 130.68, 0 109.8 M0 109.8 C-0.49 91.92, 0.8 72.62, 0 32 M0 109.8 C0.96 91.67, 0.82 74, 0 32 M0 32 C-1.53 11.26, 10.93 0.77, 32 0 M0 32 C-1.42 11.08, 12.54 1.63, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1889.830811869593 528.3738335067083) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=1</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=1234</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,2,3,4]</text></g><g stroke-linecap="round" transform="translate(2031.9451551768218 519.9735092455521) rotate(0 73.10735534858134 70.90032426115431)"><path d="M32 0 C58.95 -2.11, 85.4 1.24, 114.21 0 C132.36 1.78, 148.33 12.02, 146.21 32 C142.77 53.01, 148.95 72.09, 146.21 109.8 C148.54 131.13, 136.13 144.04, 114.21 141.8 C96.9 137.04, 73.79 138.8, 32 141.8 C11.45 144.7, -3.04 132.43, 0 109.8 C-0.51 85.99, 1.54 57.5, 0 32 C-3.27 7.57, 13.63 0.85, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C49.74 -1.19, 69.41 0.34, 114.21 0 M32 0 C54.67 -0.3, 77.83 -1.16, 114.21 0 M114.21 0 C134.13 -0.39, 147.54 11.4, 146.21 32 M114.21 0 C133.52 -1.66, 144.03 11.26, 146.21 32 M146.21 32 C145.71 52.9, 144.4 77.73, 146.21 109.8 M146.21 32 C145.75 59.46, 145.73 84.54, 146.21 109.8 M146.21 109.8 C144.33 130.81, 135.86 143.08, 114.21 141.8 M146.21 109.8 C144.44 129.51, 135.52 143.22, 114.21 141.8 M114.21 141.8 C95.37 140, 80.07 141.96, 32 141.8 M114.21 141.8 C88.1 141.72, 63.54 141.49, 32 141.8 M32 141.8 C8.85 140.7, 1.27 130.74, 0 109.8 M32 141.8 C9.18 140.26, 0.59 129.97, 0 109.8 M0 109.8 C-1.57 83.93, -0.42 60.99, 0 32 M0 109.8 C-1.15 90.37, -0.25 70.73, 0 32 M0 32 C-1.23 11.03, 12.3 1.41, 32 0 M0 32 C-0.9 9.3, 8.38 2.08, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2039.052510525403 528.3738335067064) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=1</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=-1</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[5</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,]</text></g><g transform="translate(1322.729087069793 228.20506978972116) rotate(0 216.29994201660156 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">设此案例中config.block_size=4</text></g><g transform="translate(1445.2430773531244 367.08686532286447) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g stroke-linecap="round" transform="translate(2261.7195057606873 526.5762285755081) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C56.88 3.73, 78.66 -2.78, 114.21 0 C133.57 2.28, 145.5 8.34, 146.21 32 C147.36 50.62, 145.59 65.62, 146.21 109.8 C144.73 130.57, 137.86 140.13, 114.21 141.8 C86.53 141.15, 58.08 138.45, 32 141.8 C11.31 144.74, 2.55 129.72, 0 109.8 C1.6 94.02, 2.51 74.16, 0 32 C-1.65 13.76, 12.37 -3.19, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C54 1.71, 74.01 -1.61, 114.21 0 M114.21 0 C135.16 1.33, 146.95 8.9, 146.21 32 M146.21 32 C145.33 48.16, 145.49 67.55, 146.21 109.8 M146.21 109.8 C144.35 129.92, 135.75 142.67, 114.21 141.8 M114.21 141.8 C90.65 140.35, 62.31 139.51, 32 141.8 M32 141.8 C10.34 142.11, 1.28 129.59, 0 109.8 M0 109.8 C-1.74 92.42, -1.93 72.74, 0 32 M0 32 C-1 11.45, 11.62 0.27, 32 0" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(2268.8268611092685 534.9765528366624) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=0</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=1234</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,2,3,4]</text></g><g stroke-linecap="round"><g transform="translate(2351.7838751178597 679.3768770978168) rotate(0 -189.289729712753 9.699961075741612)"><path d="M-0.85 -0.24 C-35.65 4.38, -144.83 28.03, -207.64 26.82 C-270.45 25.62, -349.37 -1.95, -377.73 -7.47" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(2351.7838751178597 679.3768770978168) rotate(0 -189.289729712753 9.699961075741612)"><path d="M-352.85 -9.9 C-363.09 -7.79, -371.8 -9.92, -377.73 -7.47" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(2351.7838751178597 679.3768770978168) rotate(0 -189.289729712753 9.699961075741612)"><path d="M-357.11 6.66 C-365.55 2.26, -372.57 -6.42, -377.73 -7.47" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(1765.3331431501065 730.1216799568429) rotate(0 527 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref, 因为seqA和seqB前4个tokens完全一样，计算出来的hash值是一样的</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seqA使用的block0可以被seqB ref,注意此时block0 ref_count+=1, 同时SeqB.num_cached_tokens+=block_size</text></g><g stroke-linecap="round" transform="translate(2410.9410029174946 526.57622857551) rotate(0 73.10735534858122 70.90032426115431)"><path d="M32 0 C62.93 -0.37, 96.11 -2.81, 114.21 0 C136.12 -2.9, 149.32 7.1, 146.21 32 C148.41 53.2, 146.81 81.91, 146.21 109.8 C144.79 129.94, 134.48 144.42, 114.21 141.8 C84.2 143.42, 61.23 143.09, 32 141.8 C7.69 139.65, -1.36 132.8, 0 109.8 C3.78 79.99, 0.81 46.99, 0 32 C-0.72 9.09, 10.41 -1.85, 32 0" stroke="none" stroke-width="0" fill="#ffec99"></path><path d="M32 0 C60.68 -1.18, 92.77 0.58, 114.21 0 M32 0 C49.31 -0.65, 68.59 0.4, 114.21 0 M114.21 0 C135.63 -0.64, 145.23 12.12, 146.21 32 M114.21 0 C134.35 -2.15, 144.05 10.29, 146.21 32 M146.21 32 C145.3 56.52, 147.95 79.35, 146.21 109.8 M146.21 32 C144.96 57.51, 145.94 82.38, 146.21 109.8 M146.21 109.8 C145.71 129.39, 134.89 143.07, 114.21 141.8 M146.21 109.8 C148.29 132.07, 133.46 140.54, 114.21 141.8 M114.21 141.8 C83.01 141.78, 53.47 141.71, 32 141.8 M114.21 141.8 C88.01 141.05, 63.27 140.74, 32 141.8 M32 141.8 C11.66 140.86, -1.53 131.73, 0 109.8 M32 141.8 C10.97 142.69, -1.42 131.55, 0 109.8 M0 109.8 C-1.74 78.13, 1.26 50.54, 0 32 M0 109.8 C-0.7 80.97, 0.23 49.53, 0 32 M0 32 C0.99 11.84, 11.42 -1.03, 32 0 M0 32 C-0.01 12.22, 8.47 1.06, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2418.048358266076 534.9765528366643) rotate(0 66 62.5)"><text x="66" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id=2</text><text x="66" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ref_count=0</text><text x="66" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">hash=53367</text><text x="66" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[5</text><text x="66" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">,33,6,7]</text></g><g stroke-linecap="round"><g transform="translate(1894.2008992400752 460.3473856302862) rotate(0 240.33542702171474 -12.634259201847271)"><path d="M-0.09 -0.94 C51.01 -14.31, 225.43 -89.16, 305.44 -79.92 C385.45 -70.68, 450.67 31.89, 479.96 54.5 M-1.59 1.19 C49.45 -12, 223.86 -87.39, 304.5 -78.35 C385.14 -69.31, 452.77 33.47, 482.27 55.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1894.2008992400752 460.3473856302862) rotate(0 240.33542702171474 -12.634259201847271)"><path d="M459.71 44.65 C462.8 46.9, 469.08 47.23, 482.27 55.44 M459.71 44.65 C465.16 46.81, 470.03 50.44, 482.27 55.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1894.2008992400752 460.3473856302862) rotate(0 240.33542702171474 -12.634259201847271)"><path d="M471.92 32.68 C472.54 37.37, 476.32 40.15, 482.27 55.44 M471.92 32.68 C474.46 37.76, 476.4 44.26, 482.27 55.44" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2095.8083407652584 508.9735092455521) rotate(0 -0.25302861397005927 -14.665793888330882)"><path d="M0.01 0.03 C-0.07 -4.79, -0.52 -24.56, -0.51 -29.36" stroke="#1e1e1e" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(2095.8083407652584 508.9735092455521) rotate(0 -0.25302861397005927 -14.665793888330882)"><path d="M4.62 -15.78 C3.21 -20.43, 1.23 -23.65, -0.51 -29.36" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g><g transform="translate(2095.8083407652584 508.9735092455521) rotate(0 -0.25302861397005927 -14.665793888330882)"><path d="M-5.31 -15.66 C-3.81 -20.34, -2.89 -23.6, -0.51 -29.36" stroke="#1e1e1e" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(2015.9153965729902 428.44694806473854) rotate(0 125 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">注意只有block被token填满</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block的hash才不为-1</text></g><g stroke-linecap="round" transform="translate(2373.3337573896247 329.9276768704476) rotate(0 232.41570026455224 22.5)"><path d="M11.25 0 C103.23 -0.18, 194.03 -0.71, 453.58 0 M11.25 0 C175.65 1.97, 341.06 2.37, 453.58 0 M453.58 0 C459.54 -1.41, 464.8 4.99, 464.83 11.25 M453.58 0 C459.07 0.53, 462.59 2.16, 464.83 11.25 M464.83 11.25 C465.19 16.37, 463.18 21.85, 464.83 33.75 M464.83 11.25 C464.13 18.88, 465.67 27.42, 464.83 33.75 M464.83 33.75 C463.54 39.91, 461.59 43.99, 453.58 45 M464.83 33.75 C465.34 41.57, 460.46 43.32, 453.58 45 M453.58 45 C338.69 46.9, 224.25 45.65, 11.25 45 M453.58 45 C307.35 45.93, 162.13 46.2, 11.25 45 M11.25 45 C2.96 43.81, -1.98 43.06, 0 33.75 M11.25 45 C3.89 46.88, 0.72 42.4, 0 33.75 M0 33.75 C-1.97 29.02, 0.98 23.06, 0 11.25 M0 33.75 C-0.95 28.62, 0.76 22.95, 0 11.25 M0 11.25 C1.29 3.75, 4.07 1.24, 11.25 0 M0 11.25 C-1.19 4.11, 1.89 1.98, 11.25 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2405.54953699988 334.9276768704476) rotate(0 200.19992065429688 17.5)"><text x="200.19992065429688" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">BlockManager.used_block_id</text></g><g transform="translate(2391.6325015789093 407.35140264608344) rotate(0 143 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_id 0,1,2 add into </text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">blockManager.used_block_id</text></g><g stroke-linecap="round"><g transform="translate(1842.2639587947474 642.3750644302636) rotate(0 -84.7912816374531 -15.53054086308066)"><path d="M-0.62 -1.12 C-15.68 -6.58, -62.67 -30.44, -90.93 -31.89 C-119.18 -33.33, -156.77 -13.21, -170.16 -9.79 M1.25 0.9 C-13.4 -4.45, -60.13 -28.35, -88.81 -30.45 C-117.49 -32.56, -157.05 -15.02, -170.83 -11.73" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1842.2639587947474 642.3750644302636) rotate(0 -84.7912816374531 -15.53054086308066)"><path d="M-151.07 -27.05 C-157.78 -25.2, -161.19 -19.16, -170.83 -11.73 M-151.07 -27.05 C-158.4 -20.99, -166.46 -15.81, -170.83 -11.73" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1842.2639587947474 642.3750644302636) rotate(0 -84.7912816374531 -15.53054086308066)"><path d="M-145.85 -10.76 C-153.99 -13.02, -158.7 -11.07, -170.83 -11.73 M-145.85 -10.76 C-154.95 -10.67, -164.91 -11.42, -170.83 -11.73" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1619.092126041834 666.805156175953) rotate(0 176 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">sequence A and B update:</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seq.block_table.append(block_id)</text></g><g stroke-linecap="round" transform="translate(1339.6600647575822 622.3308527011977) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C24.58 -3.42, 29.35 2.81, 46.75 0 C57.99 2.63, 59.36 3.04, 62.34 15.58 C60.14 22.48, 65.46 36.65, 62.34 53.56 C62.17 63.06, 56.43 67.56, 46.75 69.14 C40.09 69.1, 30.32 71.76, 15.58 69.14 C6.19 68.58, 0.29 63.92, 0 53.56 C3.59 41.1, 1.82 24.93, 0 15.58 C2.93 4.81, 3.52 1.61, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C23.28 -1.59, 27 -0.08, 46.75 0 M15.58 0 C25.89 -0.76, 37.64 0.32, 46.75 0 M46.75 0 C58.1 0.27, 61.84 3.45, 62.34 15.58 M46.75 0 C56.39 1.46, 64.41 6.13, 62.34 15.58 M62.34 15.58 C61.74 22.24, 60.79 31.99, 62.34 53.56 M62.34 15.58 C62.15 24.32, 62.01 34.36, 62.34 53.56 M62.34 53.56 C63.62 63.02, 58.14 68.2, 46.75 69.14 M62.34 53.56 C60.58 64.63, 57.45 70.03, 46.75 69.14 M46.75 69.14 C40.74 68.61, 30.7 67.41, 15.58 69.14 M46.75 69.14 C34.89 69.89, 21.95 70.25, 15.58 69.14 M15.58 69.14 C6.14 67.37, 0.99 65.12, 0 53.56 M15.58 69.14 C6.06 67.96, -0.01 65.5, 0 53.56 M0 53.56 C0.6 47.08, -0.18 38.36, 0 15.58 M0 53.56 C-0.61 40.67, -0.8 26.17, 0 15.58 M0 15.58 C-1 5.63, 6.81 -1.69, 15.58 0 M0 15.58 C0.83 6.11, 4.29 -0.76, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round" transform="translate(1338.3394402919898 700.2430616940801) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C22.69 3.47, 36.84 3.14, 46.75 0 C54.17 -2.15, 60.98 6.87, 62.34 15.58 C64.67 31.85, 61.7 44.92, 62.34 53.56 C61.62 62.37, 56.89 67.29, 46.75 69.14 C38.29 71.56, 27.19 68.55, 15.58 69.14 C5.49 69.12, 1.93 62.62, 0 53.56 C0.94 41.97, 2.29 33.53, 0 15.58 C-1.67 6.81, 7.43 1.55, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C24.01 0.21, 36.49 -1.51, 46.75 0 M15.58 0 C25.15 0.6, 36.19 0.35, 46.75 0 M46.75 0 C56.64 -1.74, 61.69 6.47, 62.34 15.58 M46.75 0 C59.22 0.94, 60.25 3.93, 62.34 15.58 M62.34 15.58 C60.92 29.89, 61.25 43.61, 62.34 53.56 M62.34 15.58 C61.82 27.34, 62.88 38.95, 62.34 53.56 M62.34 53.56 C63.34 63.01, 55.62 69.74, 46.75 69.14 M62.34 53.56 C62.65 64.83, 55.73 69.55, 46.75 69.14 M46.75 69.14 C33.67 67.03, 24.78 69.14, 15.58 69.14 M46.75 69.14 C34.4 70.15, 23.44 68.41, 15.58 69.14 M15.58 69.14 C6.18 70.32, 0.75 62.92, 0 53.56 M15.58 69.14 C5.18 70.69, -2.2 65.01, 0 53.56 M0 53.56 C-0.15 39.59, 1.09 23.95, 0 15.58 M0 53.56 C-0.69 41.68, -0.19 29.79, 0 15.58 M0 15.58 C1.61 3.5, 5.92 0.8, 15.58 0 M0 15.58 C-0.91 4.43, 4.52 1.67, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1417.5116763172089 625.9134429072401) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g transform="translate(1416.1910518516167 739.480195232587) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g transform="translate(1418.4075967546823 647.6064402788033) rotate(0 93.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_table=[0,1]</text></g><g transform="translate(1416.1994143507518 711.748794196672) rotate(0 93.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">block_table=[0,2]</text></g><g stroke-linecap="round" transform="translate(417.39708205295767 293.7514636586857) rotate(0 1215.3028042930828 249.58279822855047)"><path d="M32 0 C623.66 0, 1215.32 0, 2398.61 0 M32 0 C892.52 0, 1753.04 0, 2398.61 0 M2398.61 0 C2419.94 0, 2430.61 10.67, 2430.61 32 M2398.61 0 C2419.94 0, 2430.61 10.67, 2430.61 32 M2430.61 32 C2430.61 144.58, 2430.61 257.16, 2430.61 467.17 M2430.61 32 C2430.61 175.56, 2430.61 319.13, 2430.61 467.17 M2430.61 467.17 C2430.61 488.5, 2419.94 499.17, 2398.61 499.17 M2430.61 467.17 C2430.61 488.5, 2419.94 499.17, 2398.61 499.17 M2398.61 499.17 C1796.91 499.17, 1195.22 499.17, 32 499.17 M2398.61 499.17 C1810.14 499.17, 1221.68 499.17, 32 499.17 M32 499.17 C10.67 499.17, 0 488.5, 0 467.17 M32 499.17 C10.67 499.17, 0 488.5, 0 467.17 M0 467.17 C0 379.77, 0 292.37, 0 32 M0 467.17 C0 319.32, 0 171.47, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(1005.5648229253936 171.75024308413413) rotate(0 64.68370722009402 59.46129317569512)"><path d="M-0.3 -1.05 C-23.14 7.74, -182.33 32.72, -136.44 52.89 C-90.56 73.06, 206.78 108.98, 275 119.97 M1.74 1.02 C-21.34 9.45, -183.11 31.69, -137.6 51.17 C-92.09 70.65, 206.45 106.48, 274.8 117.88" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1005.5648229253936 171.75024308413413) rotate(0 64.68370722009402 59.46129317569512)"><path d="M250.33 123.04 C257.09 120.65, 268.61 121.32, 274.8 117.88 M250.33 123.04 C259.35 121.22, 266.41 118.99, 274.8 117.88" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1005.5648229253936 171.75024308413413) rotate(0 64.68370722009402 59.46129317569512)"><path d="M252.75 106.11 C258.69 109.6, 269.37 116.15, 274.8 117.88 M252.75 106.11 C260.79 110.04, 267.03 113.59, 274.8 117.88" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2433.8678525576124 503.71795850118724) rotate(0 183.1731071897159 -58.84363742343385)"><path d="M-0.39 0.76 C38.79 -2.94, 174.02 -3.41, 234.82 -23.28 C295.62 -43.15, 342.51 -102.66, 364.42 -118.45 M1.6 0.12 C40.75 -3.86, 173.58 -5.55, 234.44 -25.14 C295.29 -44.74, 344.66 -102.16, 366.74 -117.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2433.8678525576124 503.71795850118724) rotate(0 183.1731071897159 -58.84363742343385)"><path d="M354.47 -95.7 C359.31 -99.84, 362.22 -109.44, 366.74 -117.48 M354.47 -95.7 C356.69 -101.68, 360.6 -106.85, 366.74 -117.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2433.8678525576124 503.71795850118724) rotate(0 183.1731071897159 -58.84363742343385)"><path d="M343.34 -108.68 C351.12 -109.22, 357.09 -115.25, 366.74 -117.48 M343.34 -108.68 C348.37 -111.46, 355.01 -113.45, 366.74 -117.48" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(435.224429281314 375.19993479993536) rotate(0 367.5 187.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">优先prefill </text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">while self.waiting and num_seqs &lt; self.max_num_seqs:</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    不断地从scheduler.waiting deque取Sequence</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    直到整个batch的tokens num &gt;= config.max_num_batched_tokens</text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    或者blockManager没有free block可为新Seqence token分配</text><text x="0" y="142.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">再decode</text><text x="0" y="167.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">while self.running and num_seqs &lt; self.max_num_seqs:</text><text x="0" y="192.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    不断地从scheduler.running deque取Sequence</text><text x="0" y="217.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    直到blockManager没有free block可为新decode出来的Seqence token分配</text><text x="0" y="242.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    期间会尝试将running deque最右侧(即优先度最低)的Sequence驱逐</text><text x="0" y="267.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    (scheduler.preempt())出去即将Sequence放回到waiting deque</text><text x="0" y="292.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">    同时释放掉Sequence占用的资源，即BlockManager中的block</text><text x="0" y="317.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="342.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">返回值为list[Sequence]和is_prefill, 在nano-vllm中一次forward只能处理</text><text x="0" y="367.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prefill和decode其中一种</text></g><g transform="translate(425.805418617687 183.24071423777968) rotate(0 197.9998779296875 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LLMEngine.generate()</text></g><g transform="translate(903.4464330985065 826.0882582015947) rotate(0 192.5 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ModelRunner.prepare_prefille/decode</text></g><g stroke-linecap="round"><g transform="translate(1266.0098738942595 730.2295706726181) rotate(0 -238.55987600309834 65.72294222249184)"><path d="M-0.77 -0.8 C-58.85 4.85, -268.26 11.74, -347.71 33.69 C-427.17 55.63, -455.78 114.83, -477.51 130.85 M1.02 1.39 C-57.26 7.21, -268.64 13.09, -348.5 34.9 C-428.36 56.71, -456.55 116.33, -478.14 132.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1266.0098738942595 730.2295706726181) rotate(0 -238.55987600309834 65.72294222249184)"><path d="M-468.31 109.26 C-473.27 118.06, -476.51 126.34, -478.14 132.25 M-468.31 109.26 C-471.87 116.25, -473.9 123.15, -478.14 132.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1266.0098738942595 730.2295706726181) rotate(0 -238.55987600309834 65.72294222249184)"><path d="M-455.84 120.96 C-465.3 125.43, -473.08 129.46, -478.14 132.25 M-455.84 120.96 C-463.28 124.18, -469.22 127.42, -478.14 132.25" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(624.3348862396448 879.5614533568169) rotate(0 605.5 87.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cu_seqlens_q=[0,5,9] #seq token数量前缀和</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">cu_seqlens_k=[0,5,13] #seq token数量前缀和,考虑了seqB前4个prefix cache token</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">slot_mapping=[0,1,2,3,4,5, 8,9,10,11] #每个token在GPU Block上以token粒度的绝对位置</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">计算方式为(token所属的block_id*block_size)+token在seq中的绝对位置</text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"></text><text x="0" y="142.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">input_ids=[1,2,3,4,5, 5,33,6,7] #seqB前4个token作为prefix cache前缀cache已在seqA block0中,所以不重复放入input_ids</text><text x="0" y="167.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">positions=[0,1,2,3,4, 4,5,6,7] #各个seq的token在seq中的绝对位置</text></g><g stroke-linecap="round" transform="translate(614.4173467747374 871.9106021634525) rotate(0 610.3617017186723 58.93934299847115)"><path d="M29.47 0 C407.81 0, 786.15 0, 1191.25 0 M29.47 0 C359.91 0, 690.35 0, 1191.25 0 M1191.25 0 C1210.9 0, 1220.72 9.82, 1220.72 29.47 M1191.25 0 C1210.9 0, 1220.72 9.82, 1220.72 29.47 M1220.72 29.47 C1220.72 41.3, 1220.72 53.14, 1220.72 88.41 M1220.72 29.47 C1220.72 52.21, 1220.72 74.95, 1220.72 88.41 M1220.72 88.41 C1220.72 108.06, 1210.9 117.88, 1191.25 117.88 M1220.72 88.41 C1220.72 108.06, 1210.9 117.88, 1191.25 117.88 M1191.25 117.88 C823.87 117.88, 456.48 117.88, 29.47 117.88 M1191.25 117.88 C829.27 117.88, 467.29 117.88, 29.47 117.88 M29.47 117.88 C9.82 117.88, 0 108.06, 0 88.41 M29.47 117.88 C9.82 117.88, 0 108.06, 0 88.41 M0 88.41 C0 65.88, 0 43.34, 0 29.47 M0 88.41 C0 64.95, 0 41.49, 0 29.47 M0 29.47 C0 9.82, 9.82 0, 29.47 0 M0 29.47 C0 9.82, 9.82 0, 29.47 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(490.5881716889363 917.34895615391) rotate(0 53.89997863769531 17.5)"><text x="0" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Context</text></g><g stroke-linecap="round" transform="translate(2110.8193766338304 877.7322319677223) rotate(0 228.95644242713354 49.30496661708139)"><path d="M24.65 0 C135.95 1.64, 247.07 1.48, 433.26 0 M24.65 0 C128.11 -0.46, 231.07 -0.58, 433.26 0 M433.26 0 C451.33 1.41, 457.13 7.03, 457.91 24.65 M433.26 0 C447.41 2.08, 458.05 10.09, 457.91 24.65 M457.91 24.65 C459.88 41.93, 456.39 58.3, 457.91 73.96 M457.91 24.65 C458.09 43.02, 457.14 60.5, 457.91 73.96 M457.91 73.96 C459.44 91.17, 450.99 98.61, 433.26 98.61 M457.91 73.96 C458.29 91.82, 448.51 98.97, 433.26 98.61 M433.26 98.61 C343.76 95.82, 254.25 97.26, 24.65 98.61 M433.26 98.61 C345 99.32, 257.01 99.91, 24.65 98.61 M24.65 98.61 C8.77 98.93, -1.81 88.67, 0 73.96 M24.65 98.61 C10.11 99.15, 1.68 88.49, 0 73.96 M0 73.96 C2.15 60.72, -1.52 51.83, 0 24.65 M0 73.96 C-0.18 57.15, -0.05 40.71, 0 24.65 M0 24.65 C0.6 9.59, 8.1 1.01, 24.65 0 M0 24.65 C1.57 8.86, 7.86 0.19, 24.65 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2131.875901458425 892.0371985848033) rotate(0 207.89991760253906 35)"><text x="207.89991760253906" y="24.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">model =</text><text x="207.89991760253906" y="59.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="28px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Qwen3ForCausalLM(hf_config)</text></g><g stroke-linecap="round"><g transform="translate(1834.0073196010987 1024.9260262393345) rotate(0 138.7787771890754 -69.69094646503436)"><path d="M0.6 -0.56 C22.17 -22.23, 83.97 -109.81, 130.22 -130.58 C176.47 -151.35, 253.61 -126.05, 278.11 -125.2 M-0.55 1.75 C21.33 -20.24, 86.12 -111.01, 132.45 -132.52 C178.78 -154.02, 253.32 -128.68, 277.42 -127.3" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1834.0073196010987 1024.9260262393345) rotate(0 138.7787771890754 -69.69094646503436)"><path d="M252.81 -122.92 C260.86 -126.17, 271.36 -125.96, 277.42 -127.3 M252.81 -122.92 C261.98 -123.74, 269.11 -126.52, 277.42 -127.3" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1834.0073196010987 1024.9260262393345) rotate(0 138.7787771890754 -69.69094646503436)"><path d="M255.75 -139.76 C262.65 -136.86, 272.08 -130.52, 277.42 -127.3 M255.75 -139.76 C263.83 -134.88, 269.95 -131.96, 277.42 -127.3" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(2221.3999367579727 1139.2527791274842) rotate(0 309 37.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">模型预测出各个Seqence的next token, 返回token_ids:list[int]</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A next token=f, token_id=6</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B next token=h, token_id=8</text></g><g stroke-linecap="round"><g transform="translate(2566.465227315706 914.0025303704642) rotate(0 93.05066755122004 107.3787509247727)"><path d="M0.16 0.46 C29.95 11.41, 152.62 30.3, 177.8 66.07 C202.97 101.84, 155.9 190.52, 151.23 215.1 M-1.21 -0.34 C29.04 10.19, 154.76 28.47, 180.12 64.06 C205.49 99.65, 156.03 188.17, 150.97 213.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2566.465227315706 914.0025303704642) rotate(0 93.05066755122004 107.3787509247727)"><path d="M150.99 188.2 C151.83 192.56, 151.42 201.01, 150.97 213.2 M150.99 188.2 C149.89 198.38, 150.94 207.55, 150.97 213.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2566.465227315706 914.0025303704642) rotate(0 93.05066755122004 107.3787509247727)"><path d="M167.06 194.06 C164.29 197.13, 160.28 204.27, 150.97 213.2 M167.06 194.06 C160.03 201.97, 155.12 208.97, 150.97 213.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(2649.8432798258227 1209.3435299512712) rotate(0 -182.94462798106747 50.18592766405391)"><path d="M-0.74 0.22 C5.11 15.77, 106.05 77.93, 35.28 93.77 C-35.49 109.61, -348.46 94.71, -425.35 95.26 M1.07 -0.72 C6.84 14.46, 106.09 75.94, 34.84 92.1 C-36.4 108.25, -349.49 95.71, -426.37 96.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2649.8432798258227 1209.3435299512712) rotate(0 -182.94462798106747 50.18592766405391)"><path d="M-402.74 88.03 C-409.75 92.08, -416.1 92.22, -426.37 96.2 M-402.74 88.03 C-408.45 91.03, -413.88 92.68, -426.37 96.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2649.8432798258227 1209.3435299512712) rotate(0 -182.94462798106747 50.18592766405391)"><path d="M-403.02 105.13 C-410.01 103.82, -416.27 98.61, -426.37 96.2 M-403.02 105.13 C-408.49 104.01, -413.85 101.55, -426.37 96.2" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1872.8277720221438 834.7901227084585) rotate(0 149 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">input_ids和positions作为输入</text></g><g transform="translate(2631.167707287029 973.8936325906925) rotate(0 40 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">模型输出</text></g><g stroke-linecap="round" transform="translate(415.66499990418254 797.5252037028149) rotate(0 1216.1594688934551 141.68098825322932)"><path d="M32 0 C649.36 0, 1266.72 0, 2400.32 0 M32 0 C860.78 0, 1689.57 0, 2400.32 0 M2400.32 0 C2421.65 0, 2432.32 10.67, 2432.32 32 M2400.32 0 C2421.65 0, 2432.32 10.67, 2432.32 32 M2432.32 32 C2432.32 111.95, 2432.32 191.91, 2432.32 251.36 M2432.32 32 C2432.32 116.72, 2432.32 201.43, 2432.32 251.36 M2432.32 251.36 C2432.32 272.7, 2421.65 283.36, 2400.32 283.36 M2432.32 251.36 C2432.32 272.7, 2421.65 283.36, 2400.32 283.36 M2400.32 283.36 C1904.69 283.36, 1409.07 283.36, 32 283.36 M2400.32 283.36 C1779.24 283.36, 1158.17 283.36, 32 283.36 M32 283.36 C10.67 283.36, 0 272.7, 0 251.36 M32 283.36 C10.67 283.36, 0 272.7, 0 251.36 M0 251.36 C0 186.82, 0 122.28, 0 32 M0 251.36 C0 173.78, 0 96.2, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(432.4591604271228 812.7984554114555) rotate(0 168.29989624023438 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">ModelRunner.Run()</text></g><g stroke-linecap="round" transform="translate(2128.3754027660552 1181.639526750816) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C25 2.92, 34.58 -2.81, 46.75 0 C57.46 -0.39, 60.83 4.86, 62.34 15.58 C59.77 32.14, 65 41.69, 62.34 53.56 C62.67 65.51, 53.97 68.99, 46.75 69.14 C35.93 67.92, 26.03 71.29, 15.58 69.14 C6.44 68.24, 3.28 67.24, 0 53.56 C0.82 40.76, -0.6 30.94, 0 15.58 C3.14 3.15, 7.6 -3.11, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C26.12 -1.01, 36.38 0.85, 46.75 0 M15.58 0 C22.55 -0.7, 28.76 0.49, 46.75 0 M46.75 0 C55.23 0.93, 63.87 5.97, 62.34 15.58 M46.75 0 C58.63 0, 62.71 6.62, 62.34 15.58 M62.34 15.58 C64.12 23.03, 62.63 33.45, 62.34 53.56 M62.34 15.58 C63.01 28.2, 62.25 39.68, 62.34 53.56 M62.34 53.56 C61.75 65.4, 57.69 69.46, 46.75 69.14 M62.34 53.56 C60.25 61.97, 59.04 69.68, 46.75 69.14 M46.75 69.14 C34.37 69.88, 25.46 67.56, 15.58 69.14 M46.75 69.14 C40.01 68.99, 33.16 68.8, 15.58 69.14 M15.58 69.14 C5.05 68.11, 0.6 65.32, 0 53.56 M15.58 69.14 C5.06 70.31, 1.57 64.58, 0 53.56 M0 53.56 C1.04 42.02, -0.86 33.81, 0 15.58 M0 53.56 C0.65 41.03, -0.63 29.17, 0 15.58 M0 15.58 C1.24 6.06, 3.88 0.21, 15.58 0 M0 15.58 C-0.09 6.39, 6.16 0.68, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(2718.828881249497 1250.023373612632) rotate(0 64 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">更新Seqences</text></g><g stroke-linecap="round" transform="translate(2127.42916600968 1258.8031618242658) rotate(0 31.16977417810415 34.57017410506978)"><path d="M15.58 0 C28 0.01, 38.28 0.06, 46.75 0 C60.25 -2.57, 60.21 3.11, 62.34 15.58 C63.27 30.53, 59.76 42.19, 62.34 53.56 C63.49 64.17, 57.53 68.67, 46.75 69.14 C39.76 68.57, 33.54 72.76, 15.58 69.14 C3.44 67.19, 2.22 64.4, 0 53.56 C3.33 43.56, 2.59 34.53, 0 15.58 C1.63 6.89, 7.06 0.35, 15.58 0" stroke="none" stroke-width="0" fill="#ffc9c9"></path><path d="M15.58 0 C21.74 0.84, 32.61 0.6, 46.75 0 M15.58 0 C22.38 0.25, 31.85 0.18, 46.75 0 M46.75 0 C58.43 0, 62.66 6.44, 62.34 15.58 M46.75 0 C55.96 0.36, 60.48 7.18, 62.34 15.58 M62.34 15.58 C62.82 24.82, 60.69 31.56, 62.34 53.56 M62.34 15.58 C61.89 29.21, 62.46 41.54, 62.34 53.56 M62.34 53.56 C60.53 62.22, 58.79 69.61, 46.75 69.14 M62.34 53.56 C64.02 62.04, 55.77 68.27, 46.75 69.14 M46.75 69.14 C34.25 70.48, 25.8 68.83, 15.58 69.14 M46.75 69.14 C38.1 68.49, 29.89 69.69, 15.58 69.14 M15.58 69.14 C5.08 70.15, 1.36 64.5, 0 53.56 M15.58 69.14 C4.84 69.33, -0.01 65.18, 0 53.56 M0 53.56 C0.7 44.44, -0.82 35.2, 0 15.58 M0 53.56 C0.8 43, -0.48 31.69, 0 15.58 M0 15.58 C-0.08 6.23, 6.03 0.59, 15.58 0 M0 15.58 C0.19 3.82, 6.24 -0.13, 15.58 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1963.9409345226613 1171.0702039411099) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence A</text></g><g transform="translate(1970.5437546021194 1318.9710766323224) rotate(0 55 12.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Sequence B</text></g><g transform="translate(1866.357286399482 1200.0792814078104) rotate(0 126.5 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcdef"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,6]</text></g><g transform="translate(1793.2783225009994 1259.1185746111878) rotate(0 165 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">prompt: "abcde fgh"</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">token_ids=[1,2,3,4,5,33,6,7,8]</text></g><g transform="translate(1811.8025944917372 1367.411846736868) rotate(0 322 25)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">注意此时Seqence的block_table并没有更新</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">其会在scheduler.scheduler()时在blockManager.allocate()中更新</text></g><g stroke-linecap="round"><g transform="translate(1781.5225374621145 1302.213798435645) rotate(0 -41.74223951505388 0.599787526576165)"><path d="M0.77 0 C-13.28 0.3, -69.25 1.97, -83.41 2.25 M-0.28 -1.05 C-14.55 -1.13, -70.09 -0.17, -84.26 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1781.5225374621145 1302.213798435645) rotate(0 -41.74223951505388 0.599787526576165)"><path d="M-61.04 -8.74 C-69.74 -4.78, -77.24 -2.65, -84.26 0.52 M-61.04 -8.74 C-69.44 -5.5, -76.28 -2.47, -84.26 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1781.5225374621145 1302.213798435645) rotate(0 -41.74223951505388 0.599787526576165)"><path d="M-60.52 8.35 C-69.48 5.88, -77.17 1.58, -84.26 0.52 M-60.52 8.35 C-68.94 6.2, -75.95 3.83, -84.26 0.52" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(1114.9153306629896 1228.1597596803404) rotate(0 286 62.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">检查Sequence是否已经完成，判断条件为：</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">1.Sequence的最后一个token为终止符且模型不忽略终止符</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">2.或者已经达到了一条Sequence生成的最大token限制：</text><text x="0" y="92.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">if (not seq.ignore_eos and token_id == self.eos) or </text><text x="0" y="117.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">seq.num_completion_tokens == seq.max_tokens</text></g><g stroke-linecap="round"><g transform="translate(1082.3598581881583 1298.4364606780182) rotate(0 -47.485222960605014 0.6868588792258379)"><path d="M-0.62 0.19 C-16.69 0.42, -80.26 1.97, -96.23 2.15 M1.26 -0.76 C-14.46 -0.9, -78.12 0, -94.02 0.57" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1082.3598581881583 1298.4364606780182) rotate(0 -47.485222960605014 0.6868588792258379)"><path d="M-70.73 -8.52 C-77.72 -7.38, -83.68 -4.88, -94.02 0.57 M-70.73 -8.52 C-77.23 -6.48, -84.93 -2.41, -94.02 0.57" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(1082.3598581881583 1298.4364606780182) rotate(0 -47.485222960605014 0.6868588792258379)"><path d="M-70.34 8.58 C-77.56 4.31, -83.64 1.41, -94.02 0.57 M-70.34 8.58 C-76.87 5.29, -84.7 4.03, -94.02 0.57" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(459.10097245548025 1257.265693483956) rotate(0 258.5 37.5)"><text x="0" y="17.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">若Sequence已经完成则将Sequence状态设置为FINISHED</text><text x="0" y="42.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">释放掉Sequence占用的资源(即BlockManager中的block)</text><text x="0" y="67.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">同时将Sequence移出scheduler.running deque</text></g><g stroke-linecap="round" transform="translate(419.4493601623095 1092.5806132655325) rotate(0 1216.8811674734236 167.04876882303734)"><path d="M32 0 C551.78 0, 1071.57 0, 2401.76 0 M32 0 C542.63 0, 1053.26 0, 2401.76 0 M2401.76 0 C2423.1 0, 2433.76 10.67, 2433.76 32 M2401.76 0 C2423.1 0, 2433.76 10.67, 2433.76 32 M2433.76 32 C2433.76 96.88, 2433.76 161.76, 2433.76 302.1 M2433.76 32 C2433.76 121.66, 2433.76 211.32, 2433.76 302.1 M2433.76 302.1 C2433.76 323.43, 2423.1 334.1, 2401.76 334.1 M2433.76 302.1 C2433.76 323.43, 2423.1 334.1, 2401.76 334.1 M2401.76 334.1 C1692.3 334.1, 982.85 334.1, 32 334.1 M2401.76 334.1 C1806.97 334.1, 1212.18 334.1, 32 334.1 M32 334.1 C10.67 334.1, 0 323.43, 0 302.1 M32 334.1 C10.67 334.1, 0 323.43, 0 302.1 M0 302.1 C0 208.79, 0 115.49, 0 32 M0 302.1 C0 232.39, 0 162.67, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(437.34607850218447 1113.6585003935415) rotate(0 227.69985961914062 22.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">Scheduler.postprocess()</text></g><g stroke-linecap="round" transform="translate(160.2000043676427 275.83581680698626) rotate(0 1362.3144219013236 588.5988404602849)"><path d="M32 0 C696.82 0, 1361.65 0, 2692.63 0 M32 0 C741.88 0, 1451.75 0, 2692.63 0 M2692.63 0 C2713.96 0, 2724.63 10.67, 2724.63 32 M2692.63 0 C2713.96 0, 2724.63 10.67, 2724.63 32 M2724.63 32 C2724.63 288.24, 2724.63 544.47, 2724.63 1145.2 M2724.63 32 C2724.63 317.17, 2724.63 602.34, 2724.63 1145.2 M2724.63 1145.2 C2724.63 1166.53, 2713.96 1177.2, 2692.63 1177.2 M2724.63 1145.2 C2724.63 1166.53, 2713.96 1177.2, 2692.63 1177.2 M2692.63 1177.2 C1647.49 1177.2, 602.34 1177.2, 32 1177.2 M2692.63 1177.2 C1775.33 1177.2, 858.02 1177.2, 32 1177.2 M32 1177.2 C10.67 1177.2, 0 1166.53, 0 1145.2 M32 1177.2 C10.67 1177.2, 0 1166.53, 0 1145.2 M0 1145.2 C0 890.09, 0 634.99, 0 32 M0 1145.2 C0 876.94, 0 608.68, 0 32 M0 32 C0 10.67, 10.67 0, 32 0 M0 32 C0 10.67, 10.67 0, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(170.00152637450412 311.23460580502615) rotate(0 125.09994506835938 157.5)"><text x="0" y="31.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">LLMEngine</text><text x="0" y="76.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">.step()</text><text x="0" y="121.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">不断调用</text><text x="0" y="166.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">直到scheduler</text><text x="0" y="211.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">waitingdeuqe</text><text x="0" y="256.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">runningdeque</text><text x="0" y="301.5" font-family="Comic Shanns, monospace, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">均为空</text></g><g stroke-linecap="round"><g transform="translate(420.76988387840004 1268.2129877421648) rotate(0 -56.16261974273178 -315.59364129386404)"><path d="M-0.47 -0.4 C-19.31 -61.96, -110.22 -263.81, -112.6 -368.88 C-114.98 -473.94, -30.84 -586.93, -14.78 -630.79 M1.48 -1.65 C-17.59 -63.58, -110.93 -265.92, -113.74 -370.54 C-116.54 -475.16, -31.57 -585.89, -15.37 -629.37" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(420.76988387840004 1268.2129877421648) rotate(0 -56.16261974273178 -315.59364129386404)"><path d="M-18.68 -604.59 C-18.33 -613.5, -15.1 -620.69, -15.37 -629.37 M-18.68 -604.59 C-16.59 -612.15, -15.63 -621.04, -15.37 -629.37" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(420.76988387840004 1268.2129877421648) rotate(0 -56.16261974273178 -315.59364129386404)"><path d="M-33.83 -612.52 C-28.36 -618.7, -20.03 -623.23, -15.37 -629.37 M-33.83 -612.52 C-27.03 -617.44, -21.29 -623.83, -15.37 -629.37" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask></svg>